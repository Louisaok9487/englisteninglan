<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±èªå­¸ç¿’æ‡‰ç”¨ç¨‹å¼</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for better aesthetics and responsiveness */
        body {
            font-family: "Inter", sans-serif;
            background-color: #f0f2f5; /* Light grey background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top for better content flow */
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .app-container {
            background-color: #ffffff;
            border-radius: 16px; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Softer shadow */
            width: 100%;
            max-width: 800px; /* Max width for desktop */
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .tab-button {
            padding: 1rem 1.5rem;
            font-weight: 600;
            color: #4b5563; /* Grey text */
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .tab-button.active {
            color: #1d4ed8; /* Blue text */
            border-color: #1d4ed8; /* Blue underline */
        }
        .content-section {
            padding: 1.5rem;
            display: none; /* Hidden by default */
        }
        .content-section.active {
            display: block; /* Shown when active */
        }

        /* Styling for buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* Pill shape */
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: none; /* Remove default border */
            cursor: pointer;
        }
        .btn-primary {
            background-color: #3b82f6; /* Blue */
            color: white;
        }
        .btn-primary:hover {
            background-color: #2563eb; /* Darker blue */
            transform: translateY(-2px); /* Lift effect */
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        .btn-secondary {
            background-color: #e5e7eb; /* Light grey */
            color: #374151; /* Dark grey text */
        }
        .btn-secondary:hover {
            background-color: #d1d5db; /* Darker light grey */
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        .btn-danger {
            background-color: #ef4444; /* Red */
            color: white;
        }
        .btn-danger:hover {
            background-color: #dc2626; /* Darker red */
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }

        /* Styling for disabled buttons */
        .btn:disabled {
            opacity: 0.5; /* Make it visibly greyed out */
            cursor: not-allowed; /* Change cursor to indicate it's not clickable */
            box-shadow: none; /* Remove shadow when disabled */
            transform: none; /* Remove lift effect when disabled */
        }

        /* Input styling */
        .input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
        }

        /* Message Box Styling */
        .message-box {
            background-color: #fefcbf; /* Light yellow */
            border: 1px solid #fcd34d; /* Yellow border */
            color: #92400e; /* Dark brown text */
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            display: none; /* Hidden by default */
        }
        .message-box.show {
            display: block;
        }

        /* Specific styles for conversation display */
        .conversation-line {
            padding: 0.5rem 0;
            border-bottom: 1px dashed #e5e7eb;
        }
        .conversation-line:last-child {
            border-bottom: none;
        }
        .option-button {
            width: 100%;
            text-align: left;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            background-color: #f9fafb;
            transition: all 0.2s ease;
        }
        .option-button:hover:not(:disabled) {
            background-color: #e5e7eb;
            border-color: #9ca3af;
        }
        .option-button.selected {
            border-color: #3b82f6;
            background-color: #dbeafe;
            font-weight: 600;
        }
        .option-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="antialiased">
    <div class="app-container">
        <!-- Tab Navigation -->
        <div class="flex border-b border-gray-200">
            <button id="listeningTabBtn" class="tab-button active flex-1 text-center">è½åŠ›ç·´ç¿’ ğŸ§</button>
            <!-- Speaking tab removed -->
        </div>

        <!-- Listening Practice Tab Content -->
        <div id="listeningContent" class="content-section active">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">è½åŠ›ç·´ç¿’</h2>

            <!-- Accent Selection -->
            <div class="mb-6 p-4 bg-blue-50 rounded-lg shadow-sm">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">é¸æ“‡å£éŸ³</h3>
                <div class="flex flex-wrap gap-3">
                    <button id="usAccentBtn" class="btn btn-secondary">ç¾å¼å£éŸ³ ğŸ‡ºğŸ‡¸</button>
                    <button id="ukAccentBtn" class="btn btn-primary">è‹±å¼å£éŸ³ ğŸ‡¬ğŸ‡§</button>
                </div>
            </div>

            <!-- Listening Comprehension Quiz -->
            <div class="p-4 bg-green-50 rounded-lg shadow-sm">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">æƒ…å¢ƒå°è©±ç†è§£ <span id="scenarioNumberDisplay" class="text-base font-normal text-gray-500 ml-2"></span></h3>
                <p class="text-gray-600 mb-4">ä»”ç´°è†è½å°è©±ï¼Œç„¶å¾Œå›ç­”å•é¡Œã€‚</p>

                <div id="conversationDisplay" class="bg-white p-4 rounded-lg shadow-inner mb-6 min-h-[120px] flex flex-col justify-center">
                    <!-- Conversation lines will be inserted here -->
                    <p class="text-gray-500 italic">é»æ“Šã€Œæ’­æ”¾å°è©±ã€é–‹å§‹ã€‚</p>
                </div>

                <div class="flex flex-col sm:flex-row gap-3 mb-4">
                    <button id="playConversationBtn" class="btn btn-primary flex-1">æ’­æ”¾å°è©± â–¶ï¸</button>
                    <button id="pauseConversationBtn" class="btn btn-secondary flex-1" disabled>æš«åœ â¸ï¸</button>
                    <button id="stopConversationBtn" class="btn btn-danger flex-1" disabled>åœæ­¢ â¹ï¸</button>
                    <button id="nextScenarioBtn" class="btn btn-secondary flex-1">ä¸‹ä¸€å€‹éš¨æ©Ÿæƒ…å¢ƒ â¡ï¸</button>
                </div>

                <p id="scenarioQuestion" class="text-lg font-semibold text-gray-800 mb-4 mt-4 hidden">å•é¡Œï¼š</p>
                <div id="optionsContainer" class="grid grid-cols-1 gap-3 mb-4">
                    <!-- Options buttons will be inserted here -->
                </div>

                <div class="flex flex-wrap gap-3">
                    <button id="checkAnswerBtn" class="btn btn-primary" disabled>æª¢æŸ¥ç­”æ¡ˆ âœ…</button>
                    <button id="showTranscriptBtn" class="btn btn-secondary" disabled>é¡¯ç¤ºä¸­æ–‡åŸæ–‡ ğŸ“–</button>
                </div>
                <p id="quizFeedback" class="text-lg font-semibold mt-4"></p>
                <p id="quizTranscriptDisplay" class="text-gray-700 mt-2 italic hidden whitespace-pre-wrap"></p>
            </div>
        </div>

        <!-- Speaking Practice Tab Content Removed -->

        <!-- Global Message Box -->
        <div id="messageBox" class="message-box"></div>
    </div>

    <script>
        // --- Global Variables and Initial Setup ---
        const appContainer = document.querySelector('.app-container');
        const listeningTabBtn = document.getElementById('listeningTabBtn');
        const listeningContent = document.getElementById('listeningContent');
        const messageBox = document.getElementById('messageBox');

        // Speech Synthesis (TTS)
        const synth = window.speechSynthesis;
        let currentUtterance = null; // To keep track of the current speaking utterance
        let isConversationPlaying = false;
        let isConversationPaused = false;
        let speaker1Voice = null; // Voice for speaker 1
        let speaker2Voice = null; // Voice for speaker 2
        let currentAccent = 'en-GB'; // Default accent for all speech

        // Speech Recognition (STT) - Removed as speaking tab is removed
        let recognition = null;
        let mediaRecorder = null;
        let audioChunks = [];
        let recordedAudioBlob = null;
        let audioContext = null;
        let sourceNode = null;

        // --- Listening Scenarios for Taiwan Daily Life ---
        const listeningScenarios = [
            {
                topic: "Asking for Direction (å•è·¯)",
                conversation: [
                    "Tourist: Excuse me, could you tell me how to get to Taipei 101?",
                    "Local: Of course! Go straight down this road, then turn left at the second traffic light.",
                    "Tourist: Straight, then left at the second light. Got it. Is it far from there?",
                    "Local: Not really. It's about a ten-minute walk. You can't miss it.",
                    "Tourist: Thank you so much for your help!",
                    "Local: You're welcome! Have a good day."
                ],
                chineseTranslation: "éŠå®¢ï¼šä¸å¥½æ„æ€ï¼Œè«‹å•å°åŒ—101æ€éº¼èµ°ï¼Ÿ\nç•¶åœ°äººï¼šç•¶ç„¶ï¼æ²¿è‘—é€™æ¢è·¯ç›´èµ°ï¼Œç„¶å¾Œåœ¨ç¬¬äºŒå€‹ç´…ç¶ ç‡ˆå·¦è½‰ã€‚\néŠå®¢ï¼šç›´èµ°ï¼Œç¬¬äºŒå€‹ç´…ç¶ ç‡ˆå·¦è½‰ã€‚çŸ¥é“äº†ã€‚é›¢é‚£è£¡é å—ï¼Ÿ\nç•¶åœ°äººï¼šä¸å¤ªé ã€‚å¤§ç´„èµ°ååˆ†é˜ã€‚ä½ ä¸æœƒéŒ¯éçš„ã€‚\néŠå®¢ï¼šéå¸¸æ„Ÿè¬æ‚¨çš„å¹«åŠ©ï¼\nç•¶åœ°äººï¼šä¸å®¢æ°£ï¼ç¥æ‚¨æœ‰ç¾å¥½çš„ä¸€å¤©ã€‚",
                question: "æ ¹æ“šå°è©±ï¼ŒéŠå®¢éœ€è¦åœ¨å“ªè£¡è½‰å½ï¼Ÿ",
                options: ["ç¬¬ä¸€å€‹ç´…ç¶ ç‡ˆ", "ç¬¬äºŒå€‹ç´…ç¶ ç‡ˆ", "ç¬¬ä¸‰å€‹ç´…ç¶ ç‡ˆ", "åœ¨è·¯å£å³è½‰"],
                correctAnswerIndex: 1,
                englishTranscript: "Tourist: Excuse me, could you tell me how to get to Taipei 101?\nLocal: Of course! Go straight down this road, then turn left at the second traffic light.\nTourist: Straight, then left at the second light. Got it. Is it far from there?\nLocal: Not really. It's about a ten-minute walk. You can't miss it.\nTourist: Thank you so much for your help!\nLocal: You're welcome! Have a good day."
            },
            {
                topic: "Ordering at a Restaurant (é¤å»³é»é¤)",
                conversation: [
                    "Waiter: Welcome! What can I get for you today?",
                    "Customer: Hi! I'd like a large bubble milk tea, half sugar, less ice.",
                    "Waiter: Half sugar, less ice, got it. Anything else?",
                    "Customer: Yes, and one beef noodle soup, please.",
                    "Waiter: Excellent choice! That'll be 250 NTD.",
                    "Customer: Here you go. Thank you!"
                ],
                chineseTranslation: "æœå‹™ç”Ÿï¼šæ­¡è¿å…‰è‡¨ï¼ä»Šå¤©æƒ³é»ä»€éº¼ï¼Ÿ\né¡§å®¢ï¼šå—¨ï¼æˆ‘æƒ³è¦ä¸€æ¯å¤§æ¯çç å¥¶èŒ¶ï¼ŒåŠç³–å°‘å†°ã€‚\næœå‹™ç”Ÿï¼šåŠç³–å°‘å†°ï¼Œå¥½çš„ã€‚é‚„æœ‰åˆ¥çš„å—ï¼Ÿ\né¡§å®¢ï¼šæ˜¯çš„ï¼Œå†åŠ ä¸€ä»½ç‰›è‚‰éºµï¼Œè¬è¬ã€‚\næœå‹™ç”Ÿï¼šå¾ˆæ£’çš„é¸æ“‡ï¼ç¸½å…±æ˜¯æ–°å°å¹£250å…ƒã€‚\né¡§å®¢ï¼šçµ¦ä½ ã€‚è¬è¬ï¼",
                question: "é¡§å®¢é»äº†ä»€éº¼é£²æ–™ï¼Ÿ",
                options: ["å’–å•¡", "ç¶ èŒ¶", "çç å¥¶èŒ¶", "æœæ±"],
                correctAnswerIndex: 2,
                englishTranscript: "Waiter: Welcome! What can I get for you today?\nCustomer: Hi! I'd like a large bubble milk tea, half sugar, less ice.\nWaiter: Half sugar, less ice, got it. Anything else?",
            },
            {
                topic: "Airport Check-in (æ©Ÿå ´å ±åˆ°)",
                conversation: [
                    "Agent: Good morning! Passport and ticket, please.",
                    "Passenger: Good morning. Here you are.",
                    "Agent: Are you checking any bags today?",
                    "Passenger: Yes, just one suitcase.",
                    "Agent: Alright. Your gate is A12, and boarding starts at 9:30 AM.",
                    "Passenger: Thank you!"
                ],
                chineseTranslation: "æ«ƒæª¯äººå“¡ï¼šæ—©å®‰ï¼è«‹å‡ºç¤ºè­·ç…§å’Œæ©Ÿç¥¨ã€‚\nä¹˜å®¢ï¼šæ—©å®‰ã€‚çµ¦ä½ ã€‚\næ«ƒæª¯äººå“¡ï¼šä»Šå¤©æœ‰è¦è¨—é‹çš„è¡Œæå—ï¼Ÿ\nä¹˜å®¢ï¼šæ˜¯çš„ï¼Œåªæœ‰ä¸€å€‹è¡Œæç®±ã€‚\næ«ƒæª¯äººå“¡ï¼šå¥½çš„ã€‚æ‚¨çš„ç™»æ©Ÿé–€æ˜¯A12ï¼Œä¸Šåˆ9:30é–‹å§‹ç™»æ©Ÿã€‚\nä¹˜å®¢ï¼šè¬è¬ï¼",
                question: "ä¹˜å®¢æœ‰å¹¾ä»¶è¡Œæè¦è¨—é‹ï¼Ÿ",
                options: ["æ²’æœ‰", "ä¸€ä»¶", "å…©ä»¶", "ä¸‰ä»¶"],
                correctAnswerIndex: 1,
                englishTranscript: "Agent: Good morning! Passport and ticket, please.\nPassenger: Good morning. Here you are.\nAgent: Are you checking any bags today?\nPassenger: Yes, just one suitcase.\nAgent: Alright. Your gate is A12, and boarding starts at 9:30 AM.\nPassenger: Thank you!"
            },
            {
                topic: "Shopping at a Night Market (å¤œå¸‚è³¼ç‰©)",
                conversation: [
                    "Vendor: Hello! Can I help you?",
                    "Customer: Hi! How much is this T-shirt?",
                    "Vendor: That one is 350 NTD.",
                    "Customer: Hmm, is there a smaller size available?",
                    "Vendor: Yes, we have small and medium. Which one would you like?",
                    "Customer: I'll take the small, please."
                ],
                chineseTranslation: "æ”¤è²©ï¼šä½ å¥½ï¼éœ€è¦å¹«å¿™å—ï¼Ÿ\né¡§å®¢ï¼šå—¨ï¼é€™ä»¶Tæ¤å¤šå°‘éŒ¢ï¼Ÿ\næ”¤è²©ï¼šé‚£ä»¶æ˜¯æ–°å°å¹£350å…ƒã€‚\né¡§å®¢ï¼šå—¯ï¼Œæœ‰å°ä¸€é»çš„å°ºå¯¸å—ï¼Ÿ\næ”¤è²©ï¼šæœ‰ï¼Œæˆ‘å€‘æœ‰å°è™Ÿå’Œä¸­è™Ÿã€‚ä½ æƒ³è¦å“ªä¸€å€‹ï¼Ÿ\né¡§å®¢ï¼šæˆ‘æ‹¿å°è™Ÿçš„ï¼Œè¬è¬ã€‚",
                question: "é¡§å®¢æƒ³çŸ¥é“Tæ¤çš„ä»€éº¼è³‡è¨Šï¼Ÿ",
                options: ["é¡è‰²", "åƒ¹æ ¼", "æè³ª", "å“ç‰Œ"],
                correctAnswerIndex: 1,
                englishTranscript: "Vendor: Hello! Can I help you?\nCustomer: Hi! How much is this T-shirt?\nVendor: That one is 350 NTD.\nCustomer: Hmm, is there a smaller size available?",
            },
            {
                topic: "Taking a Taxi (æ­è¨ˆç¨‹è»Š)",
                conversation: [
                    "Passenger: Excuse me, are you free?",
                    "Driver: Yes, where are you going?",
                    "Passenger: To Ximending, please. How much will it be?",
                    "Driver: About 200 to 250 NTD, depending on traffic.",
                    "Passenger: Okay, let's go.",
                    "Driver: Hop in!"
                ],
                chineseTranslation: "ä¹˜å®¢ï¼šä¸å¥½æ„æ€ï¼Œä½ ç©ºè‘—å—ï¼Ÿ\nå¸æ©Ÿï¼šæ˜¯çš„ï¼Œä½ è¦å»å“ªè£¡ï¼Ÿ\nä¹˜å®¢ï¼šè«‹åˆ°è¥¿é–€ç”ºã€‚å¤§æ¦‚å¤šå°‘éŒ¢ï¼Ÿ\nå¸æ©Ÿï¼šå¤§ç´„æ–°å°å¹£200åˆ°250å…ƒï¼Œå–æ±ºæ–¼äº¤é€šç‹€æ³ã€‚\nä¹˜å®¢ï¼šå¥½çš„ï¼Œèµ°å§ã€‚\nå¸æ©Ÿï¼šä¸Šè»Šï¼",
                question: "è¨ˆç¨‹è»Šå¸æ©Ÿé ä¼°è»Šè³‡å¤§ç´„æ˜¯å¤šå°‘ï¼Ÿ",
                options: ["100-150å…ƒ", "200-250å…ƒ", "300-350å…ƒ", "400å…ƒä»¥ä¸Š"],
                correctAnswerIndex: 1,
                englishTranscript: "Passenger: Excuse me, are you free?\nDriver: Yes, where are you going?\nPassenger: To Ximending, please. How much will it be?\nDriver: About 200 to 250 NTD, depending on traffic.\nPassenger: Okay, let's go.\nDriver: Hop in!"
            },
            {
                topic: "Visiting a Temple (åƒè§€å»Ÿå®‡)",
                conversation: [
                    "Visitor: This temple is beautiful! How old is it?",
                    "Guide: It was built over 300 years ago, during the Qing Dynasty.",
                    "Visitor: Wow, that's amazing. What are these carvings about?",
                    "Guide: They depict stories from ancient Chinese folklore and mythology.",
                    "Visitor: Fascinating! Thank you for the information.",
                    "Guide: My pleasure."
                ],
                chineseTranslation: "éŠå®¢ï¼šé€™åº§å»ŸçœŸæ¼‚äº®ï¼å®ƒæœ‰å¤šä¹…æ­·å²äº†ï¼Ÿ\nå°éŠï¼šå®ƒå»ºæ–¼300å¤šå¹´å‰ï¼Œæ¸…æœæ™‚æœŸã€‚\néŠå®¢ï¼šå“‡ï¼Œå¤ªæ£’äº†ã€‚é€™äº›é›•åˆ»æ˜¯é—œæ–¼ä»€éº¼çš„ï¼Ÿ\nå°éŠï¼šå®ƒå€‘æç¹ªäº†ä¸­åœ‹å¤ä»£æ°‘é–“å‚³èªªå’Œç¥è©±æ•…äº‹ã€‚\néŠå®¢ï¼šçœŸå¼•äººå…¥å‹ï¼è¬è¬ä½ çš„è³‡è¨Šã€‚\nå°éŠï¼šä¸å®¢æ°£ã€‚",
                question: "é€™åº§å»Ÿå®‡å¤§ç´„å»ºæ–¼å¤šä¹…ä»¥å‰ï¼Ÿ",
                options: ["100å¤šå¹´å‰", "200å¤šå¹´å‰", "300å¤šå¹´å‰", "400å¤šå¹´å‰"],
                correctAnswerIndex: 2,
                englishTranscript: "Visitor: This temple is beautiful! How old is it?\nGuide: It was built over 300 years ago, during the Qing Dynasty.\nVisitor: Wow, that's amazing. What are these carvings about?\nGuide: They depict stories from ancient Chinese folklore and mythology.\nVisitor: Fascinating! Thank you for the information.",
            },
            {
                topic: "At a Convenience Store (ä¾¿åˆ©å•†åº—)",
                conversation: [
                    "Customer: Hi, I'd like this bottled water and a pack of tissues.",
                    "Clerk: Okay, that's 45 NTD in total.",
                    "Customer: Here's 50. Do you have a bag?",
                    "Clerk: Yes, we do. Here's your change and your items.",
                    "Customer: Thanks!",
                    "Clerk: You're welcome. Have a good day."
                ],
                chineseTranslation: "é¡§å®¢ï¼šå—¨ï¼Œæˆ‘æƒ³è¦é€™ç“¶æ°´å’Œä¸€åŒ…é¢ç´™ã€‚\nåº—å“¡ï¼šå¥½çš„ï¼Œç¸½å…±æ–°å°å¹£45å…ƒã€‚\né¡§å®¢ï¼šé€™æ˜¯50å…ƒã€‚ä½ å€‘æœ‰è¢‹å­å—ï¼Ÿ\nåº—å“¡ï¼šæ˜¯çš„ï¼Œæˆ‘å€‘æœ‰ã€‚é€™æ˜¯ä½ çš„æ‰¾é›¶å’Œä½ çš„å•†å“ã€‚\né¡§å®¢ï¼šè¬è¬ï¼\nåº—å“¡ï¼šä¸å®¢æ°£ã€‚ç¥æ‚¨æœ‰ç¾å¥½çš„ä¸€å¤©ã€‚",
                question: "é¡§å®¢é™¤äº†æ°´ä¹‹å¤–é‚„è²·äº†ä»€éº¼ï¼Ÿ",
                options: ["é¤…ä¹¾", "é›œèªŒ", "é¢ç´™", "å£é¦™ç³–"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Hi, I'd like this bottled water and a pack of tissues.\nClerk: Okay, that's 45 NTD in total.\nCustomer: Here's 50. Do you have a bag?",
            },
            {
                topic: "Riding the MRT (æ­æ·é‹)",
                conversation: [
                    "Tourist: Excuse me, which line goes to Taipei Main Station?",
                    "Local: You need to take the Red Line. It's just two stops from here.",
                    "Tourist: The Red Line, two stops. Got it. Is it easy to transfer?",
                    "Local: Yes, very easy. All transfers are well-marked.",
                    "Tourist: Great! Thanks for the info.",
                    "Local: No problem, enjoy your ride!"
                ],
                chineseTranslation: "éŠå®¢ï¼šä¸å¥½æ„æ€ï¼Œå“ªæ¢ç·šåˆ°å°åŒ—è»Šç«™ï¼Ÿ\nç•¶åœ°äººï¼šä½ éœ€è¦æ­ç´…ç·šã€‚å¾é€™è£¡éå»åªæœ‰å…©ç«™ã€‚\néŠå®¢ï¼šç´…ç·šï¼Œå…©ç«™ã€‚çŸ¥é“äº†ã€‚è½‰ä¹˜æ–¹ä¾¿å—ï¼Ÿ\nç•¶åœ°äººï¼šæ˜¯çš„ï¼Œéå¸¸æ–¹ä¾¿ã€‚æ‰€æœ‰è½‰ä¹˜éƒ½æœ‰æ¸…æ¥šæ¨™ç¤ºã€‚\néŠå®¢ï¼šå¤ªå¥½äº†ï¼è¬è¬ä½ çš„è³‡è¨Šã€‚\nç•¶åœ°äººï¼šä¸å®¢æ°£ï¼Œç¥ä½ æ—…é€”æ„‰å¿«ï¼",
                question: "éŠå®¢éœ€è¦æ­ä¹˜å“ªæ¢æ·é‹ç·šå‰å¾€å°åŒ—è»Šç«™ï¼Ÿ",
                options: ["è—ç·š", "ç¶ ç·š", "ç´…ç·š", "æ£•ç·š"],
                correctAnswerIndex: 2,
                englishTranscript: "Tourist: Excuse me, which line goes to Taipei Main Station?\nLocal: You need to take the Red Line. It's just two stops from here.\nTourist: The Red Line, two stops. Got it. Is it easy to transfer?\nLocal: Yes, very easy. All transfers are well-marked.\nTourist: Great! Thanks for the info.\nLocal: No problem, enjoy your ride!"
            },
            {
                topic: "Booking Accommodation (é è¨‚ä½å®¿)",
                conversation: [
                    "Guest: Hello, I'd like to book a room for two nights, starting tomorrow.",
                    "Receptionist: Let me check. For how many people?",
                    "Guest: Just one person.",
                    "Receptionist: Okay, we have a standard single room available. The rate is 2,500 NTD per night.",
                    "Guest: Sounds good. I'll take it.",
                    "Receptionist: Excellent! Can I get your name, please?"
                ],
                chineseTranslation: "å®¢äººï¼šä½ å¥½ï¼Œæˆ‘æƒ³é è¨‚ä¸€é–“æˆ¿é–“ï¼Œæ˜å¤©é–‹å§‹ä½å…©æ™šã€‚\næ¥å¾…å“¡ï¼šè®“æˆ‘æŸ¥ä¸€ä¸‹ã€‚å¹¾å€‹äººï¼Ÿ\nå®¢äººï¼šåªæœ‰ä¸€å€‹äººã€‚\næ¥å¾…å“¡ï¼šå¥½çš„ï¼Œæˆ‘å€‘æœ‰ä¸€é–“æ¨™æº–å–®äººæˆ¿ã€‚æ¯æ™šè²»ç”¨æ˜¯æ–°å°å¹£2,500å…ƒã€‚\nå®¢äººï¼šè½èµ·ä¾†ä¸éŒ¯ã€‚æˆ‘è¨‚äº†ã€‚\næ¥å¾…å“¡ï¼šå¤ªå¥½äº†ï¼è«‹å•æ‚¨çš„å§“åæ˜¯ï¼Ÿ",
                question: "å®¢äººæƒ³é è¨‚å¹¾æ™šçš„æˆ¿é–“ï¼Ÿ",
                options: ["ä¸€æ™š", "å…©æ™š", "ä¸‰æ™š", "å››æ™š"],
                correctAnswerIndex: 1,
                englishTranscript: "Guest: Hello, I'd like to book a room for two nights, starting tomorrow.\nReceptionist: Let me check. For how many people?\nGuest: Just one person.\nReceptionist: Okay, we have a standard single room available. The rate is 2,500 NTD per night.\nGuest: Sounds good. I'll take it.\nReceptionist: Excellent! Can I get your name, please?"
            },
            {
                topic: "At a Bank/ATM (éŠ€è¡Œ/ææ¬¾æ©Ÿ)",
                conversation: [
                    "Customer: Excuse me, I'd like to exchange some currency.",
                    "Bank Teller: Certainly. What currency are you exchanging?",
                    "Customer: US dollars to New Taiwan dollars.",
                    "Bank Teller: Okay, please fill out this form. Do you have your passport?",
                    "Customer: Yes, here it is.",
                    "Bank Teller: Thank you. I'll process this for you."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä¸å¥½æ„æ€ï¼Œæˆ‘æƒ³å…Œæ›ä¸€äº›è²¨å¹£ã€‚\néŠ€è¡Œæ«ƒå“¡ï¼šç•¶ç„¶ã€‚æ‚¨è¦å…Œæ›ä»€éº¼è²¨å¹£ï¼Ÿ\né¡§å®¢ï¼šç¾å…ƒå…Œæ›æ–°å°å¹£ã€‚\néŠ€è¡Œæ«ƒå“¡ï¼šå¥½çš„ï¼Œè«‹å¡«å¯«é€™ä»½è¡¨æ ¼ã€‚æ‚¨æœ‰å¸¶è­·ç…§å—ï¼Ÿ\né¡§å®¢ï¼šæ˜¯çš„ï¼Œåœ¨é€™è£¡ã€‚\néŠ€è¡Œæ«ƒå“¡ï¼šè¬è¬ã€‚æˆ‘æœƒç‚ºæ‚¨è¾¦ç†ã€‚",
                question: "é¡§å®¢æƒ³æŠŠä»€éº¼è²¨å¹£å…Œæ›æˆæ–°å°å¹£ï¼Ÿ",
                options: ["æ—¥åœ“", "æ­å…ƒ", "ç¾å…ƒ", "äººæ°‘å¹£"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Excuse me, I'd like to exchange some currency.\nBank Teller: Certainly. What currency are you exchanging?\nCustomer: US dollars to New Taiwan dollars.\nBank Teller: Okay, please fill out this form. Do you have your passport?",
            },
            // --- 20 New Scenarios Below ---
            {
                topic: "Buying Fruit at a Traditional Market (å‚³çµ±å¸‚å ´è²·æ°´æœ)",
                conversation: [
                    "Customer: How much are these mangoes?",
                    "Vendor: They are 80 NTD per catty.",
                    "Customer: Can I get two, please? Are they sweet?",
                    "Vendor: Very sweet! Freshly picked this morning.",
                    "Customer: Great! I'll take them.",
                    "Vendor: Here you go. Enjoy!"
                ],
                chineseTranslation: "é¡§å®¢ï¼šé€™äº›èŠ’æœå¤šå°‘éŒ¢ï¼Ÿ\næ”¤è²©ï¼šä¸€æ–¤80å…ƒã€‚\né¡§å®¢ï¼šæˆ‘è²·å…©å€‹ï¼Œè¬è¬ã€‚å®ƒå€‘ç”œå—ï¼Ÿ\næ”¤è²©ï¼šéå¸¸ç”œï¼ä»Šå¤©æ—©ä¸Šå‰›æ¡çš„ã€‚\né¡§å®¢ï¼šå¤ªå¥½äº†ï¼æˆ‘è²·äº†ã€‚\næ”¤è²©ï¼šçµ¦ä½ ã€‚è«‹äº«ç”¨ï¼",
                question: "èŠ’æœçš„åƒ¹æ ¼æ˜¯å¤šå°‘ï¼Ÿ",
                options: ["ä¸€æ–¤50å…ƒ", "ä¸€æ–¤60å…ƒ", "ä¸€æ–¤80å…ƒ", "ä¸€æ–¤100å…ƒ"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: How much are these mangoes?\nVendor: They are 80 NTD per catty.\nCustomer: Can I get two, please? Are they sweet?\nVendor: Very sweet! Freshly picked this morning.\nCustomer: Great! I'll take them.\nVendor: Here you go. Enjoy!"
            },
            {
                topic: "Ordering Street Food (é»å°åƒ)",
                conversation: [
                    "Customer: I'd like one oyster omelette, please.",
                    "Vendor: Spicy or not spicy?",
                    "Customer: Not spicy, thank you. And one stinky tofu.",
                    "Vendor: Alright, that's 170 NTD. For here or to go?",
                    "Customer: To go, please.",
                    "Vendor: Coming right up!"
                ],
                chineseTranslation: "é¡§å®¢ï¼šæˆ‘æƒ³è¦ä¸€ä»½èšµä»”ç…ï¼Œè¬è¬ã€‚\næ”¤è²©ï¼šè¦è¾£çš„é‚„æ˜¯ä¸è¾£çš„ï¼Ÿ\né¡§å®¢ï¼šä¸è¾£çš„ï¼Œè¬è¬ã€‚é‚„æœ‰ä¸€ä»½è‡­è±†è…ã€‚\næ”¤è²©ï¼šå¥½çš„ï¼Œç¸½å…±170å…ƒã€‚å…§ç”¨é‚„æ˜¯å¤–å¸¶ï¼Ÿ\né¡§å®¢ï¼šå¤–å¸¶ï¼Œè¬è¬ã€‚\næ”¤è²©ï¼šé¦¬ä¸Šä¾†ï¼",
                question: "é¡§å®¢é»äº†å“ªå…©ç¨®å°åƒï¼Ÿ",
                options: ["æ»·è‚‰é£¯å’Œé›æ’", "èšµä»”ç…å’Œè‡­è±†è…", "ç‰›è‚‰éºµå’Œæ°´é¤ƒ", "è”¥æ²¹é¤…å’Œæ½¤é¤…"],
                correctAnswerIndex: 1,
                englishTranscript: "Customer: I'd like one oyster omelette, please.\nVendor: Spicy or not spicy?\nCustomer: Not spicy, thank you. And one stinky tofu.\nVendor: Alright, that's 170 NTD. For here or to go?\nCustomer: To go, please.\nVendor: Coming right up!"
            },
            {
                topic: "Asking about Bus Routes/Fares (è©¢å•å…¬è»Šè·¯ç·š/ç¥¨åƒ¹)",
                conversation: [
                    "Passenger: Excuse me, does this bus go to National Palace Museum?",
                    "Driver: No, you need bus number 304. This one goes to Shilin.",
                    "Passenger: Oh, I see. How much is the fare?",
                    "Driver: It's 15 NTD with an EasyCard, or 30 NTD cash.",
                    "Passenger: Thank you for the information.",
                    "Driver: You're welcome."
                ],
                chineseTranslation: "ä¹˜å®¢ï¼šä¸å¥½æ„æ€ï¼Œé€™ç­å…¬è»Šæœ‰åˆ°æ•…å®®åšç‰©é™¢å—ï¼Ÿ\nå¸æ©Ÿï¼šæ²’æœ‰ï¼Œä½ éœ€è¦æ­304è™Ÿå…¬è»Šã€‚é€™ç­è»Šåˆ°å£«æ—ã€‚\nä¹˜å®¢ï¼šå–”ï¼ŒåŸä¾†å¦‚æ­¤ã€‚ç¥¨åƒ¹å¤šå°‘ï¼Ÿ\nå¸æ©Ÿï¼šç”¨æ‚ éŠå¡æ˜¯15å…ƒï¼Œç¾é‡‘æ˜¯30å…ƒã€‚\nä¹˜å®¢ï¼šè¬è¬ä½ çš„è³‡è¨Šã€‚\nå¸æ©Ÿï¼šä¸å®¢æ°£ã€‚",
                question: "ä¹˜å®¢éœ€è¦æ­ä¹˜å“ªä¸€è™Ÿå…¬è»Šæ‰èƒ½åˆ°é”æ•…å®®åšç‰©é™¢ï¼Ÿ",
                options: ["208", "260", "304", "605"],
                correctAnswerIndex: 2,
                englishTranscript: "Passenger: Excuse me, does this bus go to National Palace Museum?\nDriver: No, you need bus number 304. This one goes to Shilin.\nPassenger: Oh, I see. How much is the fare?\nDriver: It's 15 NTD with an EasyCard, or 30 NTD cash.\nPassenger: Thank you for the information.\nDriver: You're welcome."
            },
            {
                topic: "Visiting a Night Market Game Stall (å¤œå¸‚éŠæˆ²æ”¤ä½)",
                conversation: [
                    "Player: How much for one round of this balloon dart game?",
                    "Owner: 100 NTD for three darts!",
                    "Player: Okay, I'll try. What's the prize for hitting all balloons?",
                    "Owner: You can choose any large plush toy!",
                    "Player: Wow, that's cool! Here's the money.",
                    "Owner: Good luck!"
                ],
                chineseTranslation: "ç©å®¶ï¼šé€™å€‹å°„æ°£çƒéŠæˆ²ä¸€è¼ªå¤šå°‘éŒ¢ï¼Ÿ\nè€é—†ï¼šä¸‰æ”¯é£›é¢100å…ƒï¼\nç©å®¶ï¼šå¥½ï¼Œæˆ‘è©¦è©¦çœ‹ã€‚å°„ä¸­æ‰€æœ‰æ°£çƒçš„çå“æ˜¯ä»€éº¼ï¼Ÿ\nè€é—†ï¼šä½ å¯ä»¥é¸ä»»ä½•ä¸€å€‹å¤§å‹çµ¨æ¯›ç©å…·ï¼\nç©å®¶ï¼šå“‡ï¼Œå¤ªæ£’äº†ï¼éŒ¢çµ¦ä½ ã€‚\nè€é—†ï¼šç¥ä½ å¥½é‹ï¼",
                question: "ç©ä¸€æ¬¡å°„æ°£çƒéŠæˆ²éœ€è¦å¤šå°‘éŒ¢ï¼Ÿ",
                options: ["50å…ƒ", "80å…ƒ", "100å…ƒ", "150å…ƒ"],
                correctAnswerIndex: 2,
                englishTranscript: "Player: How much for one round of this balloon dart game?\nOwner: 100 NTD for three darts!\nPlayer: Okay, I'll try. What's the prize for hitting all balloons?\nOwner: You can choose any large plush toy!\nPlayer: Wow, that's cool! Here's the money.\nOwner: Good luck!"
            },
            {
                topic: "Asking for help with a Scooter Issue (æ©Ÿè»Šå•é¡Œæ±‚åŠ©)",
                conversation: [
                    "Rider: Excuse me, my scooter tire is flat. Is there a repair shop nearby?",
                    "Local: Oh, that's a pity. There's one just around the corner, on your right.",
                    "Rider: Around the corner, on the right. Got it. Is it open now?",
                    "Local: Yes, they usually open until late evening.",
                    "Rider: Thank you so much for your help!",
                    "Local: No problem at all."
                ],
                chineseTranslation: "é¨è»Šäººï¼šä¸å¥½æ„æ€ï¼Œæˆ‘çš„æ©Ÿè»Šè¼ªèƒæ²’æ°£äº†ã€‚é™„è¿‘æœ‰ç¶­ä¿®åº—å—ï¼Ÿ\nç•¶åœ°äººï¼šå–”ï¼ŒçœŸå¯æƒœã€‚å°±åœ¨è½‰è§’è™•ï¼Œä½ å³æ‰‹é‚Šæœ‰ä¸€å®¶ã€‚\né¨è»Šäººï¼šè½‰è§’è™•ï¼Œå³æ‰‹é‚Šã€‚çŸ¥é“äº†ã€‚ç¾åœ¨æœ‰é–‹å—ï¼Ÿ\nç•¶åœ°äººï¼šæœ‰ï¼Œä»–å€‘é€šå¸¸ç‡Ÿæ¥­åˆ°å¾ˆæ™šã€‚\né¨è»Šäººï¼šéå¸¸æ„Ÿè¬æ‚¨çš„å¹«åŠ©ï¼\nç•¶åœ°äººï¼šä¸€é»å•é¡Œéƒ½æ²’æœ‰ã€‚",
                question: "æ©Ÿè»Šç¶­ä¿®åº—åœ¨å“ªè£¡ï¼Ÿ",
                options: ["åœ¨å·¦æ‰‹é‚Š", "åœ¨è½‰è§’è™•çš„å³æ‰‹é‚Š", "åœ¨å‰æ–¹ç›´èµ°", "åœ¨å°é¢"],
                correctAnswerIndex: 1,
                englishTranscript: "Rider: Excuse me, my scooter tire is flat. Is there a repair shop nearby?\nLocal: Oh, that's a pity. There's one just around the corner, on your right.\nRider: Around the corner, on the right. Got it. Is it open now?\nLocal: Yes, they usually open until late evening.\nRider: Thank you so much for your help!\nLocal: No problem at all."
            },
            {
                topic: "At a Local Clinic/Pharmacy (è¨ºæ‰€/è—¥å±€)",
                conversation: [
                    "Patient: Hello, I have a sore throat and a cough.",
                    "Receptionist: Please fill out this form. Do you have your NHI card?",
                    "Patient: Yes, here it is. How long is the wait?",
                    "Receptionist: About 20 minutes. The doctor will see you shortly.",
                    "Patient: Thank you.",
                    "Receptionist: You're welcome."
                ],
                chineseTranslation: "ç—…äººï¼šä½ å¥½ï¼Œæˆ‘å–‰åš¨ç—›å’Œå’³å—½ã€‚\næ¥å¾…å“¡ï¼šè«‹å¡«å¯«é€™ä»½è¡¨æ ¼ã€‚ä½ æœ‰å¥ä¿å¡å—ï¼Ÿ\nç—…äººï¼šæ˜¯çš„ï¼Œåœ¨é€™è£¡ã€‚å¤§æ¦‚è¦ç­‰å¤šä¹…ï¼Ÿ\næ¥å¾…å“¡ï¼šå¤§ç´„20åˆ†é˜ã€‚é†«ç”Ÿå¾ˆå¿«å°±æœƒçœ‹ä½ ã€‚\nç—…äººï¼šè¬è¬ã€‚\næ¥å¾…å“¡ï¼šä¸å®¢æ°£ã€‚",
                question: "ç—…äººæœ‰ä»€éº¼ç—‡ç‹€ï¼Ÿ",
                options: ["é ­ç—›å’Œç™¼ç‡’", "å–‰åš¨ç—›å’Œå’³å—½", "è‚šå­ç—›å’Œå™å¿ƒ", "æµé¼»æ°´å’Œæ‰“å™´åš"],
                correctAnswerIndex: 1,
                englishTranscript: "Patient: Hello, I have a sore throat and a cough.\nReceptionist: Please fill out this form. Do you have your NHI card?\nPatient: Yes, here it is. How long is the wait?\nReceptionist: About 20 minutes. The doctor will see you shortly.\nPatient: Thank you.",
            },
            {
                topic: "Buying Tickets for a Train/HSR (è²·ç«è»Š/é«˜éµç¥¨)",
                conversation: [
                    "Customer: I'd like a ticket to Kaohsiung, please. For the next available train.",
                    "Clerk: One moment. That would be the 10:45 AM HSR. Standard or business class?",
                    "Customer: Standard, please. How much is it?",
                    "Clerk: 1490 NTD. Cash or credit card?",
                    "Customer: Credit card. Thank you!",
                    "Clerk: Here's your ticket."
                ],
                chineseTranslation: "é¡§å®¢ï¼šæˆ‘æƒ³è¦ä¸€å¼µåˆ°é«˜é›„çš„ç¥¨ï¼Œè¬è¬ã€‚æ­ä¸‹ä¸€ç­æœ‰ç©ºä½çš„åˆ—è»Šã€‚\nå”®ç¥¨å“¡ï¼šè«‹ç¨ç­‰ã€‚é‚£æ˜¯ä¸Šåˆ10:45çš„é«˜éµã€‚æ¨™æº–è»Šå»‚é‚„æ˜¯å•†å‹™è»Šå»‚ï¼Ÿ\né¡§å®¢ï¼šæ¨™æº–è»Šå»‚ï¼Œè¬è¬ã€‚å¤šå°‘éŒ¢ï¼Ÿ\nå”®ç¥¨å“¡ï¼šæ–°å°å¹£1490å…ƒã€‚ç¾é‡‘é‚„æ˜¯ä¿¡ç”¨å¡ï¼Ÿ\né¡§å®¢ï¼šä¿¡ç”¨å¡ã€‚è¬è¬ï¼\nå”®ç¥¨å“¡ï¼šé€™æ˜¯ä½ çš„ç¥¨ã€‚",
                question: "é¡§å®¢è¦æ­ä¹˜å“ªç¨®äº¤é€šå·¥å…·ï¼Ÿ",
                options: ["ç«è»Š", "å…¬è»Š", "é«˜éµ", "æ·é‹"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: I'd like a ticket to Kaohsiung, please. For the next available train.\nClerk: One moment. That would be the 10:45 AM HSR. Standard or business class?\nCustomer: Standard, please. How much is it?\nClerk: 1490 NTD. Cash or credit card?\nCustomer: Credit card. Thank you!",
            },
            {
                topic: "Asking for Recommendations (è©¢å•æ¨è–¦)",
                conversation: [
                    "Tourist: We're looking for a good local restaurant. Any recommendations?",
                    "Local: Definitely try the beef noodle soup place on the next street. It's very famous.",
                    "Tourist: Beef noodle soup, sounds great! Is it expensive?",
                    "Local: Not at all. Very reasonable prices, and delicious!",
                    "Tourist: Perfect! We'll check it out. Thanks!",
                    "Local: Enjoy your meal!"
                ],
                chineseTranslation: "éŠå®¢ï¼šæˆ‘å€‘æƒ³æ‰¾ä¸€å®¶å¥½çš„ç•¶åœ°é¤å»³ã€‚æœ‰ä»€éº¼æ¨è–¦çš„å—ï¼Ÿ\nç•¶åœ°äººï¼šçµ•å°è¦è©¦è©¦ä¸‹ä¸€æ¢è¡—çš„ç‰›è‚‰éºµåº—ã€‚å®ƒå¾ˆæœ‰åã€‚\néŠå®¢ï¼šç‰›è‚‰éºµï¼Œè½èµ·ä¾†å¾ˆæ£’ï¼è²´å—ï¼Ÿ\nç•¶åœ°äººï¼šä¸€é»ä¹Ÿä¸è²´ã€‚åƒ¹æ ¼éå¸¸åˆç†ï¼Œè€Œä¸”å¾ˆå¥½åƒï¼\néŠå®¢ï¼šå¤ªå¥½äº†ï¼æˆ‘å€‘æœƒå»çœ‹çœ‹ã€‚è¬è¬ï¼\nç•¶åœ°äººï¼šç¥ä½ ç”¨é¤æ„‰å¿«ï¼",
                question: "ç•¶åœ°äººæ¨è–¦äº†ä»€éº¼é£Ÿç‰©ï¼Ÿ",
                options: ["æ»·è‚‰é£¯", "èšµä»”ç…", "ç‰›è‚‰éºµ", "è‡­è±†è…"],
                correctAnswerIndex: 2,
                englishTranscript: "Tourist: We're looking for a good local restaurant. Any recommendations?\nLocal: Definitely try the beef noodle soup place on the next street. It's very famous.\nTourist: Beef noodle soup, sounds great! Is it expensive?\nLocal: Not at all. Very reasonable prices, and delicious!\nTourist: Perfect! We'll check it out. Thanks!",
            },
            {
                topic: "Dealing with a Lost Item (è™•ç†éºå¤±ç‰©)",
                conversation: [
                    "Person A: Oh no, I think I left my umbrella on the bus.",
                    "Person B: You should call the bus company's lost and found. Do you remember the bus number?",
                    "Person A: I think it was 262. Do you know their number?",
                    "Person B: I don't have it, but you can find it online easily.",
                    "Person A: Okay, I'll do that. Thanks for the advice.",
                    "Person B: Hope you find it!"
                ],
                chineseTranslation: "ç”²ï¼šå–”ä¸ï¼Œæˆ‘æƒ³æˆ‘æŠŠé›¨å‚˜å¿˜åœ¨å…¬è»Šä¸Šäº†ã€‚\nä¹™ï¼šä½ æ‡‰è©²æ‰“é›»è©±çµ¦å…¬è»Šå…¬å¸çš„å¤±ç‰©æ‹›é ˜è™•ã€‚ä½ è¨˜å¾—å…¬è»Šè™Ÿç¢¼å—ï¼Ÿ\nç”²ï¼šæˆ‘è¨˜å¾—æ˜¯262ã€‚ä½ çŸ¥é“ä»–å€‘çš„é›»è©±è™Ÿç¢¼å—ï¼Ÿ\nä¹™ï¼šæˆ‘æ²’æœ‰ï¼Œä½†ä½ å¯ä»¥åœ¨ç¶²ä¸Šå¾ˆå®¹æ˜“æ‰¾åˆ°ã€‚\nç”²ï¼šå¥½çš„ï¼Œæˆ‘æœƒå»æŸ¥ã€‚è¬è¬ä½ çš„å»ºè­°ã€‚\nä¹™ï¼šå¸Œæœ›ä½ æ‰¾å¾—åˆ°ï¼",
                question: "ç”²åœ¨å…¬è»Šä¸Šéºå¤±äº†ä»€éº¼ç‰©å“ï¼Ÿ",
                options: ["æ‰‹æ©Ÿ", "éŒ¢åŒ…", "é›¨å‚˜", "èƒŒåŒ…"],
                correctAnswerIndex: 2,
                englishTranscript: "Person A: Oh no, I think I left my umbrella on the bus.\nPerson B: You should call the bus company's lost and found. Do you remember the bus number?\nPerson A: I think it was 262. Do you know their number?\nPerson B: I don't have it, but you can find it online easily.\nPerson A: Okay, I'll do that. Thanks for the advice.",
            },
            {
                topic: "Asking about Recycling/Garbage Rules (è©¢å•åƒåœ¾åˆ†é¡è¦å‰‡)",
                conversation: [
                    "Resident: Excuse me, when is the garbage truck coming today?",
                    "Local: It usually comes around 7 PM, but it's often a bit late.",
                    "Resident: I see. And how do I sort the recycling?",
                    "Local: Paper, plastic, and glass are separate. Food waste goes in a different bucket.",
                    "Resident: Got it. Thanks for clarifying!",
                    "Local: No worries."
                ],
                chineseTranslation: "å±…æ°‘ï¼šä¸å¥½æ„æ€ï¼Œä»Šå¤©åƒåœ¾è»Šä»€éº¼æ™‚å€™ä¾†ï¼Ÿ\nç•¶åœ°äººï¼šé€šå¸¸æ™šä¸Š7é»å·¦å³ä¾†ï¼Œä½†å¸¸å¸¸æœƒæ™šä¸€é»ã€‚\nå±…æ°‘ï¼šå–”ï¼ŒçŸ¥é“äº†ã€‚é‚£å›æ”¶ç‰©æ€éº¼åˆ†é¡ï¼Ÿ\nç•¶åœ°äººï¼šç´™é¡ã€å¡‘è† å’Œç»ç’ƒæ˜¯åˆ†é–‹çš„ã€‚å»šé¤˜è¦æ”¾å¦ä¸€å€‹æ¡¶å­ã€‚\nå±…æ°‘ï¼šæ˜ç™½äº†ã€‚è¬è¬ä½ è§£é‡‹æ¸…æ¥šï¼\nç•¶åœ°äººï¼šä¸å®¢æ°£ã€‚",
                question: "åƒåœ¾è»Šé€šå¸¸ä»€éº¼æ™‚å€™ä¾†ï¼Ÿ",
                options: ["æ—©ä¸Š8é»", "ä¸­åˆ12é»", "æ™šä¸Š7é»å·¦å³", "æ™šä¸Š9é»"],
                correctAnswerIndex: 2,
                englishTranscript: "Resident: Excuse me, when is the garbage truck coming today?\nLocal: It usually comes around 7 PM, but it's often a bit late.\nResident: I see. And how do I sort the recycling?\nLocal: Paper, plastic, and glass are separate. Food waste goes in a different bucket.\nResident: Got it. Thanks for clarifying!",
            },
            {
                topic: "At a Post Office (éƒµå±€)",
                conversation: [
                    "Customer: I'd like to send this package to the UK, please.",
                    "Clerk: Alright. Would you prefer airmail or surface mail?",
                    "Customer: What's the difference in price and time?",
                    "Clerk: Airmail is faster, about 5-7 days, but more expensive. Surface mail is cheaper, but takes 4-6 weeks.",
                    "Customer: I'll go with airmail, please.",
                    "Clerk: Please fill out this customs form."
                ],
                chineseTranslation: "é¡§å®¢ï¼šæˆ‘æƒ³æŠŠé€™å€‹åŒ…è£¹å¯„åˆ°è‹±åœ‹ï¼Œè¬è¬ã€‚\næ«ƒæª¯äººå“¡ï¼šå¥½çš„ã€‚æ‚¨æƒ³å¯„ç©ºé‹é‚„æ˜¯æµ·é‹ï¼Ÿ\né¡§å®¢ï¼šåƒ¹æ ¼å’Œæ™‚é–“æœ‰ä»€éº¼å€åˆ¥ï¼Ÿ\næ«ƒæª¯äººå“¡ï¼šç©ºé‹æ¯”è¼ƒå¿«ï¼Œå¤§ç´„5-7å¤©ï¼Œä½†æ¯”è¼ƒè²´ã€‚æµ·é‹æ¯”è¼ƒä¾¿å®œï¼Œä½†éœ€è¦4-6é€±ã€‚\né¡§å®¢ï¼šæˆ‘é¸ç©ºé‹ï¼Œè¬è¬ã€‚\næ«ƒæª¯äººå“¡ï¼šè«‹å¡«å¯«é€™ä»½å ±é—œå–®ã€‚",
                question: "é¡§å®¢æƒ³æŠŠåŒ…è£¹å¯„åˆ°å“ªè£¡ï¼Ÿ",
                options: ["ç¾åœ‹", "æ—¥æœ¬", "è‹±åœ‹", "åŠ æ‹¿å¤§"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: I'd like to send this package to the UK, please.\nClerk: Alright. Would you prefer airmail or surface mail?\nCustomer: What's the difference in price and time?\nClerk: Airmail is faster, about 5-7 days, but more expensive. Surface mail is cheaper, but takes 4-6 weeks.\nCustomer: I'll go with airmail, please.",
            },
            {
                topic: "Asking for Wi-Fi Password (è©¢å•Wi-Fiå¯†ç¢¼)",
                conversation: [
                    "Customer: Excuse me, do you have Wi-Fi here?",
                    "Staff: Yes, we do. The network name is 'CafeConnect'.",
                    "Customer: And what's the password?",
                    "Staff: It's 'coffeelover123'. All lowercase.",
                    "Customer: Got it. Thank you!",
                    "Staff: Enjoy your stay."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä¸å¥½æ„æ€ï¼Œé€™è£¡æœ‰Wi-Fiå—ï¼Ÿ\nåº—å“¡ï¼šæ˜¯çš„ï¼Œæˆ‘å€‘æœ‰ã€‚ç¶²è·¯åç¨±æ˜¯'CafeConnect'ã€‚\né¡§å®¢ï¼šé‚£å¯†ç¢¼æ˜¯ä»€éº¼ï¼Ÿ\nåº—å“¡ï¼šæ˜¯'coffeelover123'ã€‚å…¨éƒ¨å°å¯«ã€‚\né¡§å®¢ï¼šçŸ¥é“äº†ã€‚è¬è¬ï¼\nåº—å“¡ï¼šç¥æ‚¨æ„‰å¿«ã€‚",
                question: "Wi-Fiçš„å¯†ç¢¼æ˜¯ä»€éº¼ï¼Ÿ",
                options: ["freewifi", "cafe2024", "coffeelover123", "guestnetwork"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Excuse me, do you have Wi-Fi here?\nStaff: Yes, we do. The network name is 'CafeConnect'.\nCustomer: And what's the password?\nStaff: It's 'coffeelover123'. All lowercase.\nCustomer: Got it. Thank you!",
            },
            {
                topic: "Hair Salon/Barber Shop (ç†é«®åº—/ç¾é«®æ²™é¾)",
                conversation: [
                    "Client: Hello, I'd like a haircut, please. Just a trim.",
                    "Stylist: Alright. How much would you like off?",
                    "Client: Just about an inch, to keep the length. And a little layering.",
                    "Stylist: No problem. Would you like a wash and blow-dry as well?",
                    "Client: Yes, please. Thank you!",
                    "Stylist: Please follow me."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä½ å¥½ï¼Œæˆ‘æƒ³å‰ªé ­é«®ï¼Œè¬è¬ã€‚åªè¦ä¿®å‰ªä¸€ä¸‹å°±å¥½ã€‚\nè¨­è¨ˆå¸«ï¼šå¥½çš„ã€‚ä½ æƒ³å‰ªæ‰å¤šå°‘ï¼Ÿ\né¡§å®¢ï¼šå¤§ç´„ä¸€è‹±å‹å°±å¥½ï¼Œä¿æŒé•·åº¦ã€‚å†åŠ ä¸€é»å±¤æ¬¡ã€‚\nè¨­è¨ˆå¸«ï¼šæ²’å•é¡Œã€‚ä¹Ÿéœ€è¦æ´—é«®å’Œå¹ä¹¾å—ï¼Ÿ\né¡§å®¢ï¼šæ˜¯çš„ï¼Œè¬è¬ã€‚\nè¨­è¨ˆå¸«ï¼šè«‹è·Ÿæˆ‘ä¾†ã€‚",
                question: "é¡§å®¢æƒ³è¦æ€æ¨£çš„é«®å‹æœå‹™ï¼Ÿ",
                options: ["æŸ“é«®", "ç‡™é«®", "å‰ªé«®å’Œåˆ†å±¤", "è­·é«®"],
                correctAnswerIndex: 2,
                englishTranscript: "Client: Hello, I'd like a haircut, please. Just a trim.\nStylist: Alright. How much would you like off?\nClient: Just about an inch, to keep the length. And a little layering.\nStylist: No problem. Would you like a wash and blow-dry as well?\nClient: Yes, please. Thank you!",
            },
            {
                topic: "Buying Souvenirs (è²·ç´€å¿µå“)",
                conversation: [
                    "Tourist: These pineapple cakes look delicious! How many come in a box?",
                    "Shopkeeper: There are 12 pieces in a box. They are very popular.",
                    "Tourist: I'll take two boxes, please. Are they fresh?",
                    "Shopkeeper: Baked this morning! They're our specialty.",
                    "Tourist: Perfect for gifts. Thank you!",
                    "Shopkeeper: You're welcome! Enjoy your trip."
                ],
                chineseTranslation: "éŠå®¢ï¼šé€™äº›é³³æ¢¨é…¥çœ‹èµ·ä¾†å¾ˆå¥½åƒï¼ä¸€ç›’æœ‰å¹¾å€‹ï¼Ÿ\nåº—ä¸»ï¼šä¸€ç›’æœ‰12å€‹ã€‚å®ƒå€‘å¾ˆå—æ­¡è¿ã€‚\néŠå®¢ï¼šæˆ‘è²·å…©ç›’ï¼Œè¬è¬ã€‚å®ƒå€‘æ–°é®®å—ï¼Ÿ\nåº—ä¸»ï¼šä»Šå¤©æ—©ä¸Šå‰›çƒ¤çš„ï¼é€™æ˜¯æˆ‘å€‘çš„ç‰¹è‰²ç”¢å“ã€‚\néŠå®¢ï¼šéå¸¸é©åˆç•¶ç¦®ç‰©ã€‚è¬è¬ï¼\nåº—ä¸»ï¼šä¸å®¢æ°£ï¼ç¥æ‚¨æ—…é€”æ„‰å¿«ã€‚",
                question: "ä¸€ç›’é³³æ¢¨é…¥æœ‰å¹¾å¡Šï¼Ÿ",
                options: ["6å¡Š", "8å¡Š", "10å¡Š", "12å¡Š"],
                correctAnswerIndex: 3,
                englishTranscript: "Tourist: These pineapple cakes look delicious! How many come in a box?\nShopkeeper: There are 12 pieces in a box. They are very popular.\nTourist: I'll take two boxes, please. Are they fresh?\nShopkeeper: Baked this morning! They're our specialty.\nTourist: Perfect for gifts. Thank you!",
            },
            {
                topic: "Asking about Opening Hours (è©¢å•ç‡Ÿæ¥­æ™‚é–“)",
                conversation: [
                    "Customer: Excuse me, what time do you close today?",
                    "Staff: We close at 9 PM on weekdays.",
                    "Customer: And on weekends?",
                    "Staff: On Saturdays and Sundays, we close at 10 PM.",
                    "Customer: Okay, thank you! I'll come back later.",
                    "Staff: See you then!"
                ],
                chineseTranslation: "é¡§å®¢ï¼šä¸å¥½æ„æ€ï¼Œä½ å€‘ä»Šå¤©å¹¾é»é—œé–€ï¼Ÿ\nåº—å“¡ï¼šæˆ‘å€‘å¹³æ—¥æ™šä¸Š9é»é—œé–€ã€‚\né¡§å®¢ï¼šé‚£é€±æœ«å‘¢ï¼Ÿ\nåº—å“¡ï¼šé€±å…­å’Œé€±æ—¥ï¼Œæˆ‘å€‘æ™šä¸Š10é»é—œé–€ã€‚\né¡§å®¢ï¼šå¥½çš„ï¼Œè¬è¬ï¼æˆ‘æ™šé»å†ä¾†ã€‚\nåº—å“¡ï¼šåˆ°æ™‚è¦‹ï¼",
                question: "é€™å®¶åº—é€±æœ«å¹¾é»é—œé–€ï¼Ÿ",
                options: ["æ™šä¸Š8é»", "æ™šä¸Š9é»", "æ™šä¸Š10é»", "æ™šä¸Š11é»"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Excuse me, what time do you close today?\nStaff: We close at 9 PM on weekdays.\nCustomer: And on weekends?\nStaff: On Saturdays and Sundays, we close at 10 PM.\nCustomer: Okay, thank you! I'll come back later.",
            },
            {
                topic: "At a Laundromat (è‡ªåŠ©æ´—è¡£åº—)",
                conversation: [
                    "Customer: How much does it cost to use the washing machine?",
                    "Attendant: It's 50 NTD for a small load, 80 for a large.",
                    "Customer: And for the dryer?",
                    "Attendant: 10 NTD for 10 minutes. Do you need detergent?",
                    "Customer: No, I have my own. Thanks!",
                    "Attendant: You're welcome."
                ],
                chineseTranslation: "é¡§å®¢ï¼šæ´—è¡£æ©Ÿè¦å¤šå°‘éŒ¢ï¼Ÿ\næœå‹™å“¡ï¼šå°å®¹é‡50å…ƒï¼Œå¤§å®¹é‡80å…ƒã€‚\né¡§å®¢ï¼šé‚£çƒ˜è¡£æ©Ÿå‘¢ï¼Ÿ\næœå‹™å“¡ï¼š10åˆ†é˜10å…ƒã€‚ä½ éœ€è¦æ´—è¡£ç²¾å—ï¼Ÿ\né¡§å®¢ï¼šä¸ç”¨ï¼Œæˆ‘æœ‰è‡ªå·±çš„ã€‚è¬è¬ï¼\næœå‹™å“¡ï¼šä¸å®¢æ°£ã€‚",
                question: "çƒ˜è¡£æ©Ÿæ¯10åˆ†é˜çš„è²»ç”¨æ˜¯å¤šå°‘ï¼Ÿ",
                options: ["5å…ƒ", "10å…ƒ", "15å…ƒ", "20å…ƒ"],
                correctAnswerIndex: 1,
                englishTranscript: "Customer: How much does it cost to use the washing machine?\nAttendant: It's 50 NTD for a small load, 80 for a large.\nCustomer: And for the dryer?\nAttendant: 10 NTD for 10 minutes. Do you need detergent?\nCustomer: No, I have my own. Thanks!",
            },
            {
                topic: "Ordering Coffee at a Cafe (å’–å•¡å»³é»å’–å•¡)",
                conversation: [
                    "Barista: What can I get for you?",
                    "Customer: I'd like a hot latte, please. With oat milk.",
                    "Barista: Oat milk latte, got it. Anything else?",
                    "Customer: Yes, and a slice of cheesecake.",
                    "Barista: Okay, that'll be 220 NTD. For here or to go?",
                    "Customer: For here, please."
                ],
                chineseTranslation: "å’–å•¡å¸«ï¼šæ‚¨æƒ³é»ä»€éº¼ï¼Ÿ\né¡§å®¢ï¼šæˆ‘æƒ³è¦ä¸€æ¯ç†±æ‹¿éµï¼Œè¬è¬ã€‚ç”¨ç‡•éº¥å¥¶ã€‚\nå’–å•¡å¸«ï¼šç‡•éº¥å¥¶æ‹¿éµï¼Œå¥½çš„ã€‚é‚„æœ‰åˆ¥çš„å—ï¼Ÿ\né¡§å®¢ï¼šæ˜¯çš„ï¼Œå†åŠ ä¸€ç‰‡èµ·å¸è›‹ç³•ã€‚\nå’–å•¡å¸«ï¼šå¥½çš„ï¼Œç¸½å…±220å…ƒã€‚å…§ç”¨é‚„æ˜¯å¤–å¸¶ï¼Ÿ\né¡§å®¢ï¼šå…§ç”¨ï¼Œè¬è¬ã€‚",
                question: "é¡§å®¢é»äº†ä»€éº¼é£²æ–™ï¼Ÿ",
                options: ["ç¾å¼å’–å•¡", "å¡å¸ƒå¥‡è«¾", "ç†±æ‹¿éµ", "å†°å’–å•¡"],
                correctAnswerIndex: 2,
                englishTranscript: "Barista: What can I get for you?\nCustomer: I'd like a hot latte, please. With oat milk.\nBarista: Oat milk latte, got it. Anything else?\nCustomer: Yes, and a slice of cheesecake.\nBarista: Okay, that'll be 220 NTD. For here or to go?",
            },
            {
                topic: "Asking about Local Festivals/Events (è©¢å•ç•¶åœ°ç¯€æ…¶/æ´»å‹•)",
                conversation: [
                    "Tourist: Is there anything special happening in Taipei this weekend?",
                    "Local: Yes, there's a Lantern Festival celebration at the park on Saturday evening.",
                    "Tourist: Oh, that sounds interesting! What time does it start?",
                    "Local: The main event begins at 6 PM, but you can go earlier to see the lanterns.",
                    "Tourist: Perfect! Thank you for the information.",
                    "Local: Enjoy the festival!"
                ],
                chineseTranslation: "éŠå®¢ï¼šé€™å€‹é€±æœ«å°åŒ—æœ‰ä»€éº¼ç‰¹åˆ¥çš„æ´»å‹•å—ï¼Ÿ\nç•¶åœ°äººï¼šæœ‰ï¼Œé€±å…­æ™šä¸Šå…¬åœ’æœ‰å…ƒå®µç¯€æ…¶ç¥æ´»å‹•ã€‚\néŠå®¢ï¼šå–”ï¼Œè½èµ·ä¾†å¾ˆæœ‰è¶£ï¼ä»€éº¼æ™‚å€™é–‹å§‹ï¼Ÿ\nç•¶åœ°äººï¼šä¸»è¦æ´»å‹•æ™šä¸Š6é»é–‹å§‹ï¼Œä½†ä½ å¯ä»¥æ—©é»å»çœ‹çœ‹ç‡ˆç± ã€‚\néŠå®¢ï¼šå¤ªå¥½äº†ï¼è¬è¬ä½ çš„è³‡è¨Šã€‚\nç•¶åœ°äººï¼šç¥ä½ ç¯€æ—¥æ„‰å¿«ï¼",
                question: "é€™å€‹é€±æœ«å°åŒ—æœ‰ä»€éº¼æ´»å‹•ï¼Ÿ",
                options: ["éŸ³æ¨‚æœƒ", "ç¾é£Ÿå±•", "å…ƒå®µç¯€æ…¶ç¥æ´»å‹•", "é‹å‹•æ¯”è³½"],
                correctAnswerIndex: 2,
                englishTranscript: "Tourist: Is there anything special happening in Taipei this weekend?\nLocal: Yes, there's a Lantern Festival celebration at the park on Saturday evening.\nTourist: Oh, that sounds interesting! What time does it start?",
            },
            {
                topic: "Renting a Bicycle (ç§Ÿå€Ÿè‡ªè¡Œè»Š)",
                conversation: [
                    "Renter: Hi, I'd like to rent a bicycle for a few hours.",
                    "Clerk: Sure, we have mountain bikes and city bikes. Which one do you prefer?",
                    "Renter: A city bike, please. How much is it per hour?",
                    "Clerk: It's 50 NTD per hour, or 200 NTD for the whole day.",
                    "Renter: I'll take it for three hours. Do I need to leave a deposit?",
                    "Clerk: Just your ID is fine. Enjoy your ride!"
                ],
                chineseTranslation: "ç§Ÿå€Ÿäººï¼šä½ å¥½ï¼Œæˆ‘æƒ³ç§Ÿä¸€è¼›è‡ªè¡Œè»Šå¹¾å€‹å°æ™‚ã€‚\nåº—å“¡ï¼šå¥½çš„ï¼Œæˆ‘å€‘æœ‰ç™»å±±è»Šå’ŒåŸå¸‚è‡ªè¡Œè»Šã€‚ä½ å–œæ­¡å“ªä¸€ç¨®ï¼Ÿ\nç§Ÿå€Ÿäººï¼šåŸå¸‚è‡ªè¡Œè»Šï¼Œè¬è¬ã€‚æ¯å°æ™‚å¤šå°‘éŒ¢ï¼Ÿ\nåº—å“¡ï¼šæ¯å°æ™‚50å…ƒï¼Œæˆ–è€…æ•´å¤©200å…ƒã€‚\nç§Ÿå€Ÿäººï¼šæˆ‘ç§Ÿä¸‰å€‹å°æ™‚ã€‚éœ€è¦æŠ¼é‡‘å—ï¼Ÿ\nåº—å“¡ï¼šåªè¦ä½ çš„èº«ä»½è­‰å°±å¯ä»¥äº†ã€‚ç¥ä½ é¨è¡Œæ„‰å¿«ï¼",
                question: "ç§Ÿå€ŸåŸå¸‚è‡ªè¡Œè»Šä¸€å°æ™‚çš„è²»ç”¨æ˜¯å¤šå°‘ï¼Ÿ",
                options: ["30å…ƒ", "40å…ƒ", "50å…ƒ", "60å…ƒ"],
                correctAnswerIndex: 2,
                englishTranscript: "Renter: Hi, I'd like to rent a bicycle for a few hours.\nClerk: Sure, we have mountain bikes and city bikes. Which one do you prefer?\nRenter: A city bike, please. How much is it per hour?\nClerk: It's 50 NTD per hour, or 200 NTD for the whole day.\nRenter: I'll take it for three hours. Do I need to leave a deposit?",
            },
            {
                topic: "Asking for the Restroom (è©¢å•æ´—æ‰‹é–“)",
                conversation: [
                    "Customer: Excuse me, where is the restroom?",
                    "Staff: It's downstairs, to your left.",
                    "Customer: Downstairs, left. Got it. Is it free to use?",
                    "Staff: Yes, it is. Just follow the signs.",
                    "Customer: Thank you very much!",
                    "Staff: No problem."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä¸å¥½æ„æ€ï¼Œæ´—æ‰‹é–“åœ¨å“ªè£¡ï¼Ÿ\nåº—å“¡ï¼šåœ¨æ¨“ä¸‹ï¼Œä½ å·¦æ‰‹é‚Šã€‚\né¡§å®¢ï¼šæ¨“ä¸‹ï¼Œå·¦æ‰‹é‚Šã€‚çŸ¥é“äº†ã€‚å¯ä»¥å…è²»ä½¿ç”¨å—ï¼Ÿ\nåº—å“¡ï¼šæ˜¯çš„ï¼Œå¯ä»¥ã€‚è·Ÿè‘—æŒ‡ç¤ºç‰Œèµ°å°±å¥½ã€‚\né¡§å®¢ï¼šéå¸¸æ„Ÿè¬ï¼\nåº—å“¡ï¼šä¸å®¢æ°£ã€‚",
                question: "æ´—æ‰‹é–“åœ¨å“ªè£¡ï¼Ÿ",
                options: ["æ¨“ä¸Š", "æ¨“ä¸‹å³æ‰‹é‚Š", "æ¨“ä¸‹å·¦æ‰‹é‚Š", "å¤–é¢"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Excuse me, where is the restroom?\nStaff: It's downstairs, to your left.\nCustomer: Downstairs, left. Got it. Is it free to use?\nStaff: Yes, it is. Just follow the signs.\nCustomer: Thank you very much!",
            },
            {
                topic: "At a Supermarket (è¶…å¸‚è³¼ç‰©)",
                conversation: [
                    "Customer: Excuse me, where can I find the milk?",
                    "Staff: The dairy section is in aisle 3, on your right.",
                    "Customer: Aisle 3, right. Thank you. Do you have organic milk?",
                    "Staff: Yes, we have a few brands. They're on the top shelf.",
                    "Customer: Great! Thanks for your help.",
                    "Staff: My pleasure."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä¸å¥½æ„æ€ï¼Œè«‹å•ç‰›å¥¶åœ¨å“ªè£¡ï¼Ÿ\nåº—å“¡ï¼šä¹³è£½å“å€åœ¨ç¬¬ä¸‰æ’ï¼Œä½ å³æ‰‹é‚Šã€‚\né¡§å®¢ï¼šç¬¬ä¸‰æ’ï¼Œå³æ‰‹é‚Šã€‚è¬è¬ã€‚ä½ å€‘æœ‰æœ‰æ©Ÿç‰›å¥¶å—ï¼Ÿ\nåº—å“¡ï¼šæ˜¯çš„ï¼Œæˆ‘å€‘æœ‰å¹¾å€‹å“ç‰Œã€‚å®ƒå€‘åœ¨æœ€ä¸Šé¢çš„æ¶å­ä¸Šã€‚\né¡§å®¢ï¼šå¤ªå¥½äº†ï¼è¬è¬ä½ çš„å¹«åŠ©ã€‚\nåº—å“¡ï¼šä¸å®¢æ°£ã€‚",
                question: "ç‰›å¥¶åœ¨å“ªå€‹å€åŸŸï¼Ÿ",
                options: ["å†·å‡é£Ÿå“å€", "é›¶é£Ÿå€", "ä¹³è£½å“å€", "ç†Ÿé£Ÿå€"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Excuse me, where can I find the milk?\nStaff: The dairy section is in aisle 3, on your right.\nCustomer: Aisle 3, right. Thank you. Do you have organic milk?\nStaff: Yes, we have a few brands. They're on the top shelf.\nCustomer: Great! Thanks for your help.",
            },
            {
                topic: "Buying a SIM Card (è³¼è²·SIMå¡)",
                conversation: [
                    "Customer: Hello, I need a local SIM card for my phone.",
                    "Clerk: Alright. How long will you be staying in Taiwan?",
                    "Customer: For about two weeks.",
                    "Clerk: We have a 15-day plan with unlimited data for 500 NTD. Is that suitable?",
                    "Customer: Yes, that sounds perfect. I'll take that one.",
                    "Clerk: Please show me your passport for registration."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä½ å¥½ï¼Œæˆ‘éœ€è¦ä¸€å¼µç•¶åœ°çš„æ‰‹æ©ŸSIMå¡ã€‚\nåº—å“¡ï¼šå¥½çš„ã€‚ä½ é è¨ˆåœ¨å°ç£å¾…å¤šä¹…ï¼Ÿ\né¡§å®¢ï¼šå¤§ç´„å…©é€±ã€‚\nåº—å“¡ï¼šæˆ‘å€‘æœ‰15å¤©ç„¡é™ä¸Šç¶²æ–¹æ¡ˆï¼Œ500å…ƒã€‚é€™å€‹é©åˆå—ï¼Ÿ\né¡§å®¢ï¼šæ˜¯çš„ï¼Œè½èµ·ä¾†å¾ˆå®Œç¾ã€‚æˆ‘å°±è¦é‚£å€‹ã€‚\nåº—å“¡ï¼šè«‹å‡ºç¤ºæ‚¨çš„è­·ç…§é€²è¡Œç™»è¨˜ã€‚",
                question: "é¡§å®¢æƒ³åœ¨å°ç£åœç•™å¤šä¹…ï¼Ÿ",
                options: ["ä¸€é€±", "å…©é€±", "ä¸€å€‹æœˆ", "ä¸‰å€‹æœˆ"],
                correctAnswerIndex: 1,
                englishTranscript: "Customer: Hello, I need a local SIM card for my phone.\nClerk: Alright. How long will you be staying in Taiwan?\nCustomer: For about two weeks.\nClerk: We have a 15-day plan with unlimited data for 500 NTD. Is that suitable?\nCustomer: Yes, that sounds perfect. I'll take that one.",
            },
            {
                topic: "At a Traditional Chinese Medicine Clinic (ä¸­é†«è¨ºæ‰€)",
                conversation: [
                    "Patient: Good morning, I'm here for acupuncture.",
                    "Receptionist: Please take a seat. Have you been here before?",
                    "Patient: No, it's my first time. I have shoulder pain.",
                    "Receptionist: Okay, the doctor will see you in about 15 minutes. Please fill out this health form.",
                    "Patient: Thank you.",
                    "Receptionist: You're welcome."
                ],
                chineseTranslation: "ç—…äººï¼šæ—©å®‰ï¼Œæˆ‘ä¾†é‡ç¸çš„ã€‚\næ¥å¾…å“¡ï¼šè«‹åã€‚æ‚¨ä»¥å‰ä¾†éå—ï¼Ÿ\nç—…äººï¼šæ²’æœ‰ï¼Œé€™æ˜¯ç¬¬ä¸€æ¬¡ã€‚æˆ‘è‚©è†€ç—›ã€‚\næ¥å¾…å“¡ï¼šå¥½çš„ï¼Œé†«ç”Ÿå¤§ç´„15åˆ†é˜å¾Œæœƒçœ‹æ‚¨ã€‚è«‹å¡«å¯«é€™ä»½å¥åº·è¡¨æ ¼ã€‚\nç—…äººï¼šè¬è¬ã€‚\næ¥å¾…å“¡ï¼šä¸å®¢æ°£ã€‚",
                question: "ç—…äººä¾†è¨ºæ‰€æ˜¯ç‚ºäº†ä»€éº¼ï¼Ÿ",
                options: ["æ‹”ç‰™", "é‡ç¸", "è¦–åŠ›æª¢æŸ¥", "æ‰“ç–«è‹—"],
                correctAnswerIndex: 1,
                englishTranscript: "Patient: Good morning, I'm here for acupuncture.\nReceptionist: Please take a seat. Have you been here before?\nPatient: No, it's my first time. I have shoulder pain.\nReceptionist: Okay, the doctor will see you in about 15 minutes. Please fill out this health form.",
            },
            {
                topic: "Asking for a Recommendation for a Local Snack (è©¢å•ç•¶åœ°é»å¿ƒæ¨è–¦)",
                conversation: [
                    "Tourist: I'm looking for a famous local snack. What do you recommend?",
                    "Local: You must try Sun Cakes! They are a specialty from Taichung.",
                    "Tourist: Sun Cakes? What are they like?",
                    "Local: They're sweet, flaky pastries, often with a maltose filling. Very delicious with tea.",
                    "Tourist: Sounds wonderful! Where can I buy them?",
                    "Local: There's a famous shop just two blocks away."
                ],
                chineseTranslation: "éŠå®¢ï¼šæˆ‘åœ¨æ‰¾ä¸€ç¨®æœ‰åçš„ç•¶åœ°é»å¿ƒã€‚ä½ æ¨è–¦ä»€éº¼ï¼Ÿ\nç•¶åœ°äººï¼šä½ ä¸€å®šè¦è©¦è©¦å¤ªé™½é¤…ï¼é‚£æ˜¯å°ä¸­ç‰¹ç”¢ã€‚\néŠå®¢ï¼šå¤ªé™½é¤…ï¼Ÿå®ƒæ˜¯ä»€éº¼æ¨£çš„ï¼Ÿ\nç•¶åœ°äººï¼šå®ƒå€‘æ˜¯ç”œçš„ã€é…¥è„†çš„ç³•é»ï¼Œé€šå¸¸æœ‰éº¥èŠ½ç³–å…§é¤¡ã€‚é…èŒ¶éå¸¸å¥½åƒã€‚\néŠå®¢ï¼šè½èµ·ä¾†å¾ˆæ£’ï¼åœ¨å“ªè£¡å¯ä»¥è²·åˆ°ï¼Ÿ\nç•¶åœ°äººï¼šé›¢é€™è£¡å…©æ¢è¡—å°±æœ‰ä¸€å®¶æœ‰åçš„åº—ã€‚",
                question: "ç•¶åœ°äººæ¨è–¦çš„é»å¿ƒæ˜¯ä»€éº¼ï¼Ÿ",
                options: ["é³³æ¢¨é…¥", "å¤ªé™½é¤…", "ç‰›èˆŒé¤…", "ç¶ è±†æ¤ª"],
                correctAnswerIndex: 1,
                englishTranscript: "Tourist: I'm looking for a famous local snack. What do you recommend?\nLocal: You must try Sun Cakes! They are a specialty from Taichung.\nTourist: Sun Cakes? What are they like?\nLocal: They're sweet, flaky pastries, often with a maltose filling. Very delicious with tea.\nTourist: Sounds wonderful! Where can I buy them?",
            },
            {
                topic: "At a Traditional Tea House (èŒ¶è—é¤¨)",
                conversation: [
                    "Customer: Hello, we'd like to experience a traditional tea ceremony.",
                    "Teahouse Staff: Welcome! We have several types of oolong tea. Would you like a lighter or stronger flavour?",
                    "Customer: A lighter one, please. Which tea do you recommend for beginners?",
                    "Teahouse Staff: High Mountain Oolong is a good choice. It's very fragrant and smooth.",
                    "Customer: Sounds perfect. Thank Thank you!",
                    "Teahouse Staff: Please follow me to your table."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä½ å¥½ï¼Œæˆ‘å€‘æƒ³é«”é©—å‚³çµ±èŒ¶é“ã€‚\nèŒ¶é¤¨å“¡å·¥ï¼šæ­¡è¿ï¼æˆ‘å€‘æœ‰å¹¾ç¨®çƒé¾èŒ¶ã€‚æ‚¨å–œæ­¡æ¸…æ·¡ä¸€é»é‚„æ˜¯æ¿ƒéƒä¸€é»çš„å£å‘³ï¼Ÿ\né¡§å®¢ï¼šæ¸…æ·¡ä¸€é»çš„ï¼Œè¬è¬ã€‚åˆå­¸è€…æ¨è–¦å“ªç¨®èŒ¶ï¼Ÿ\nèŒ¶é¤¨å“¡å·¥ï¼šé«˜å±±çƒé¾æ˜¯å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚å®ƒéå¸¸èŠ¬èŠ³é †å£ã€‚\né¡§å®¢ï¼šè½èµ·ä¾†å¾ˆå®Œç¾ã€‚è¬è¬ï¼\nèŒ¶é¤¨å“¡å·¥ï¼šè«‹è·Ÿæˆ‘åˆ°æ‚¨çš„åº§ä½ã€‚",
                question: "èŒ¶é¤¨å“¡å·¥å‘åˆå­¸è€…æ¨è–¦äº†å“ªç¨®èŒ¶ï¼Ÿ",
                options: ["æ™®æ´±èŒ¶", "ç¶ èŒ¶", "é«˜å±±çƒé¾", "ç´…èŒ¶"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Hello, we'd like to experience a traditional tea ceremony.\nTeahouse Staff: Welcome! We have several types of oolong tea. Would you like a lighter or stronger flavour?\nCustomer: A lighter one, please. Which tea do you recommend for beginners?\nTeahouse Staff: High Mountain Oolong is a good choice. It's very fragrant and smooth.\nCustomer: Sounds perfect. Thank you!",
            },
            {
                topic: "Asking for help with a broken phone (æ‰‹æ©Ÿæ•…éšœæ±‚åŠ©)",
                conversation: [
                    "Customer: Excuse me, my phone screen is cracked. Can you fix it?",
                    "Technician: Let me take a look. Yes, we can replace the screen. Which model is it?",
                    "Customer: It's an iPhone 13. How long will it take?",
                    "Technician: About an hour, if we have the part in stock. The cost is 3,500 NTD.",
                    "Customer: Okay, please fix it. Thank you!",
                    "Technician: We'll call you when it's ready."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä¸å¥½æ„æ€ï¼Œæˆ‘çš„æ‰‹æ©Ÿè¢å¹•è£‚äº†ã€‚ä½ å€‘èƒ½ä¿®å—ï¼Ÿ\næŠ€è¡“å“¡ï¼šæˆ‘çœ‹çœ‹ã€‚æ˜¯çš„ï¼Œæˆ‘å€‘å¯ä»¥æ›´æ›è¢å¹•ã€‚é€™æ˜¯ä»€éº¼å‹è™Ÿï¼Ÿ\né¡§å®¢ï¼šæ˜¯iPhone 13ã€‚éœ€è¦å¤šä¹…ï¼Ÿ\næŠ€è¡“å“¡ï¼šå¦‚æœæˆ‘å€‘æœ‰é›¶ä»¶åº«å­˜ï¼Œå¤§ç´„ä¸€å°æ™‚ã€‚è²»ç”¨æ˜¯æ–°å°å¹£3,500å…ƒã€‚\né¡§å®¢ï¼šå¥½çš„ï¼Œè«‹å¹«æˆ‘ä¿®ã€‚è¬è¬ï¼\næŠ€è¡“å“¡ï¼šä¿®å¥½å¾Œæˆ‘å€‘æœƒæ‰“é›»è©±çµ¦æ‚¨ã€‚",
                question: "é¡§å®¢çš„æ‰‹æ©Ÿæœ‰ä»€éº¼å•é¡Œï¼Ÿ",
                options: ["ç„¡æ³•é–‹æ©Ÿ", "é›»æ± æ²’é›»", "è¢å¹•ç ´è£‚", "ç„¡æ³•ä¸Šç¶²"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Excuse me, my phone screen is cracked. Can you fix it?\nTechnician: Let me take a look. Yes, we can replace the screen. Which model is it?\nCustomer: It's an iPhone 13. How long will it take?\nTechnician: About an hour, if we have the part in stock. The cost is 3,500 NTD.\nCustomer: Okay, please fix it. Thank you!",
            },
            {
                topic: "At a Museum/Art Gallery (åšç‰©é¤¨/ç¾è¡“é¤¨)",
                conversation: [
                    "Visitor: This exhibition is fascinating! What's the story behind this painting?",
                    "Docent: This piece depicts a local fishing village in the 1950s. The artist used vibrant colors to capture the lively atmosphere.",
                    "Visitor: It's very expressive. Is photography allowed?",
                    "Docent: Flash photography is not permitted, but you can take pictures without flash.",
                    "Visitor: Understood. Thank you for the explanation.",
                    "Docent: My pleasure. Enjoy the rest of the exhibition."
                ],
                chineseTranslation: "åƒè§€è€…ï¼šé€™å€‹å±•è¦½çœŸå¼•äººå…¥å‹ï¼é€™å¹…ç•«èƒŒå¾Œçš„æ•…äº‹æ˜¯ä»€éº¼ï¼Ÿ\nå°è¦½å“¡ï¼šé€™å¹…ä½œå“æç¹ªäº†1950å¹´ä»£çš„ä¸€å€‹ç•¶åœ°æ¼æ‘ã€‚è—è¡“å®¶é‹ç”¨é®®è±”çš„è‰²å½©æ•æ‰ç”Ÿå‹•çš„æ°›åœã€‚\nåƒè§€è€…ï¼šå®ƒéå¸¸æœ‰è¡¨ç¾åŠ›ã€‚å¯ä»¥æ‹ç…§å—ï¼Ÿ\nå°è¦½å“¡ï¼šä¸å…è¨±ä½¿ç”¨é–ƒå…‰ç‡ˆï¼Œä½†å¯ä»¥ä¸ä½¿ç”¨é–ƒå…‰ç‡ˆæ‹ç…§ã€‚\nåƒè§€è€…ï¼šæ˜ç™½äº†ã€‚è¬è¬ä½ çš„è§£é‡‹ã€‚\nå°è¦½å“¡ï¼šä¸å®¢æ°£ã€‚ç¥æ‚¨è§€å±•æ„‰å¿«ã€‚",
                question: "åœ¨é€™é–“åšç‰©é¤¨è£¡ï¼Œå“ªç¨®æ‹ç…§æ–¹å¼ä¸è¢«å…è¨±ï¼Ÿ",
                options: ["æ‰‹æ©Ÿæ‹ç…§", "ç„¡é–ƒå…‰ç‡ˆæ‹ç…§", "ä½¿ç”¨é–ƒå…‰ç‡ˆæ‹ç…§", "éŒ„å½±"],
                correctAnswerIndex: 2,
                englishTranscript: "Visitor: This exhibition is fascinating! What's the story behind this painting?\nDocent: This piece depicts a local fishing village in the 1950s. The artist used vibrant colors to capture the lively atmosphere.\nVisitor: It's very expressive. Is photography allowed?\nDocent: Flash photography is not permitted, but you can take pictures without flash.\nVisitor: Understood. Thank you for the explanation.",
            },
            {
                topic: "Asking for a recommendation for a hiking trail (è©¢å•ç™»å±±æ­¥é“æ¨è–¦)",
                conversation: [
                    "Hiker: Excuse me, we're looking for a good hiking trail with nice views.",
                    "Local: I recommend Elephant Mountain. It's a bit steep but offers amazing views of Taipei 101.",
                    "Hiker: Elephant Mountain, sounds good! How long does it take to reach the top?",
                    "Local: About 20-30 minutes, depending on your pace. It's quite popular.",
                    "Hiker: Perfect! We'll give it a try. Thanks for the tip!",
                    "Local: Enjoy the hike!"
                ],
                chineseTranslation: "ç™»å±±å®¢ï¼šä¸å¥½æ„æ€ï¼Œæˆ‘å€‘æƒ³æ‰¾ä¸€æ¢é¢¨æ™¯å¥½çš„ç™»å±±æ­¥é“ã€‚\nç•¶åœ°äººï¼šæˆ‘æ¨è–¦è±¡å±±ã€‚é›–ç„¶æœ‰é»é™¡å³­ï¼Œä½†å¯ä»¥æ¬£è³åˆ°å°åŒ—101çš„çµ•ä½³æ™¯è‰²ã€‚\nç™»å±±å®¢ï¼šè±¡å±±ï¼Œè½èµ·ä¾†ä¸éŒ¯ï¼çˆ¬åˆ°å±±é ‚å¤§ç´„éœ€è¦å¤šä¹…ï¼Ÿ\nç•¶åœ°äººï¼šå¤§ç´„20-30åˆ†é˜ï¼Œå–æ±ºæ–¼ä½ çš„é€Ÿåº¦ã€‚å®ƒå¾ˆå—æ­¡è¿ã€‚\nç™»å±±å®¢ï¼šå¤ªå¥½äº†ï¼æˆ‘å€‘æœƒå»è©¦è©¦çœ‹ã€‚è¬è¬ä½ çš„å»ºè­°ï¼\nç•¶åœ°äººï¼šç¥ä½ ç™»å±±æ„‰å¿«ï¼",
                question: "ç•¶åœ°äººæ¨è–¦äº†å“ªåº§å±±ï¼Ÿ",
                options: ["é™½æ˜å±±", "ä¸ƒæ˜Ÿå±±", "è±¡å±±", "åˆæ­¡å±±"],
                correctAnswerIndex: 2,
                englishTranscript: "Hiker: Excuse me, we're looking for a good hiking trail with nice views.\nLocal: I recommend Elephant Mountain. It's a bit steep but offers amazing views of Taipei 101.\nHiker: Elephant Mountain, sounds good! How long does it take to reach the top?\nLocal: About 20-30 minutes, depending on your pace. It's quite popular.\nHiker: Perfect! We'll give it a try. Thanks for the tip!",
            },
            {
                topic: "At a Hot Spring Resort (æº«æ³‰æœƒé¤¨)",
                conversation: [
                    "Guest: Hello, we'd like to book a private hot spring room.",
                    "Receptionist: Certainly. For how long would you like to use it?",
                    "Guest: One hour, please. Is there a public area as well?",
                    "Receptionist: Yes, we have a large public hot spring area with different pools.",
                    "Guest: Great! What's the cost for the private room?",
                    "Receptionist: It's 800 NTD per hour. Please follow me."
                ],
                chineseTranslation: "å®¢äººï¼šä½ å¥½ï¼Œæˆ‘å€‘æƒ³é è¨‚ä¸€é–“ç§äººæº«æ³‰æˆ¿ã€‚\næ¥å¾…å“¡ï¼šç•¶ç„¶ã€‚æ‚¨æƒ³ä½¿ç”¨å¤šä¹…ï¼Ÿ\nå®¢äººï¼šä¸€å°æ™‚ï¼Œè¬è¬ã€‚ä¹Ÿæœ‰å…¬å…±å€åŸŸå—ï¼Ÿ\næ¥å¾…å“¡ï¼šæ˜¯çš„ï¼Œæˆ‘å€‘æœ‰ä¸€å€‹å¤§å‹å…¬å…±æº«æ³‰å€ï¼Œæœ‰ä¸åŒçš„æ± å­ã€‚\nå®¢äººï¼šå¤ªå¥½äº†ï¼ç§äººæˆ¿é–“çš„è²»ç”¨æ˜¯å¤šå°‘ï¼Ÿ\næ¥å¾…å“¡ï¼šæ¯å°æ™‚800å…ƒã€‚è«‹è·Ÿæˆ‘ä¾†ã€‚",
                question: "å®¢äººæƒ³é è¨‚ç§äººæº«æ³‰æˆ¿å¤šä¹…ï¼Ÿ",
                options: ["åŠå°æ™‚", "ä¸€å°æ™‚", "ä¸€å€‹åŠå°æ™‚", "å…©å°æ™‚"],
                correctAnswerIndex: 1,
                englishTranscript: "Guest: Hello, we'd like to book a private hot spring room.\nReceptionist: Certainly. For how long would you like to use it?\nGuest: One hour, please. Is there a public area as well?\nReceptionist: Yes, we have a large public hot spring area with different pools.\nGuest: Great! What's the cost for the private room?",
            },
            {
                topic: "Buying a Souvenir at a Gift Shop (ç¦®å“åº—è²·ç´€å¿µå“)",
                conversation: [
                    "Customer: I'm looking for a small gift for my friend. Do you have anything unique from Taiwan?",
                    "Shopkeeper: We have these beautiful aboriginal handcrafted items, like carved wooden figures or woven bags.",
                    "Customer: They look lovely! How much is this small wooden owl?",
                    "Shopkeeper: That one is 450 NTD. It's handmade by a local artist.",
                    "Customer: I'll take it! It's perfect. Thank you!",
                    "Shopkeeper: You're welcome. I'll wrap it for you."
                ],
                chineseTranslation: "é¡§å®¢ï¼šæˆ‘åœ¨æ‰¾ä¸€å€‹é€çµ¦æœ‹å‹çš„å°ç¦®ç‰©ã€‚ä½ å€‘æœ‰ä»€éº¼å°ç£ç¨ç‰¹çš„å—ï¼Ÿ\nåº—ä¸»ï¼šæˆ‘å€‘æœ‰é€™äº›ç¾éº—çš„åŸä½æ°‘æ‰‹å·¥è—å“ï¼Œåƒæ˜¯æœ¨é›•äººå¶æˆ–ç·¨ç¹”åŒ…ã€‚\né¡§å®¢ï¼šå®ƒå€‘çœ‹èµ·ä¾†å¾ˆå¯æ„›ï¼é€™å€‹å°æœ¨è²“é ­é·¹å¤šå°‘éŒ¢ï¼Ÿ\nåº—ä¸»ï¼šé‚£å€‹æ˜¯æ–°å°å¹£450å…ƒã€‚æ˜¯ç•¶åœ°è—è¡“å®¶æ‰‹å·¥è£½ä½œçš„ã€‚\né¡§å®¢ï¼šæˆ‘è¦äº†ï¼å®ƒå¾ˆå®Œç¾ã€‚è¬è¬ï¼\nåº—ä¸»ï¼šä¸å®¢æ°£ã€‚æˆ‘å¹«ä½ åŒ…èµ·ä¾†ã€‚",
                question: "é¡§å®¢æœ€çµ‚è³¼è²·äº†ä»€éº¼ç´€å¿µå“ï¼Ÿ",
                options: ["ç·¨ç¹”åŒ…", "æœ¨é›•äººå¶", "é³³æ¢¨é…¥", "å°æœ¨è²“é ­é·¹"],
                correctAnswerIndex: 3,
                englishTranscript: "Customer: I'm looking for a small gift for my friend. Do you have anything unique from Taiwan?\nShopkeeper: We have these beautiful aboriginal handcrafted items, like carved wooden figures or woven bags.\nCustomer: They look lovely! How much is this small wooden owl?\nShopkeeper: That one is 450 NTD. It's handmade by a local artist.\nCustomer: I'll take it! It's perfect. Thank you!",
            },
            {
                topic: "At a KTV (KTVå”±æ­Œ)",
                conversation: [
                    "Friend A: Let's sing some songs! What do you want to sing first?",
                    "Friend B: How about a duet? Do you know 'A Whole New World'?",
                    "Friend A: Oh, I love that one! Let's search for it. Do they have English songs here?",
                    "Friend B: Yes, they have a huge selection of English and Chinese songs.",
                    "Friend A: Awesome! This is going to be fun.",
                    "Friend B: Definitely!"
                ],
                chineseTranslation: "æœ‹å‹Aï¼šæˆ‘å€‘ä¾†å”±æ­Œå§ï¼ä½ å…ˆæƒ³å”±ä»€éº¼ï¼Ÿ\næœ‹å‹Bï¼šåˆå”±æ€éº¼æ¨£ï¼Ÿä½ æœƒå”±ã€ŠA Whole New Worldã€‹å—ï¼Ÿ\næœ‹å‹Aï¼šå–”ï¼Œæˆ‘è¶…æ„›é‚£é¦–ï¼æˆ‘å€‘ä¾†æ‰¾æ‰¾çœ‹ã€‚é€™è£¡æœ‰è‹±æ–‡æ­Œå—ï¼Ÿ\næœ‹å‹Bï¼šæœ‰ï¼Œä»–å€‘æœ‰å¤§é‡çš„è‹±æ–‡æ­Œå’Œä¸­æ–‡æ­Œã€‚\næœ‹å‹Aï¼šå¤ªæ£’äº†ï¼é€™æœƒå¾ˆæœ‰è¶£ã€‚\næœ‹å‹Bï¼šç•¶ç„¶ï¼",
                question: "æœ‹å‹Bæè­°å”±å“ªé¦–æ­Œï¼Ÿ",
                options: ["Let It Go", "Perfect", "A Whole New World", "Despacito"],
                correctAnswerIndex: 2,
                englishTranscript: "Friend A: Let's sing some songs! What do you want to sing first?\nFriend B: How about a duet? Do you know 'A Whole New World'?",
            },
            {
                topic: "At a Temple Fair (å»Ÿæœƒ)",
                conversation: [
                    "Visitor: Wow, this temple fair is so lively! What's happening with the parade?",
                    "Local: That's a traditional Mazu procession. People are celebrating the goddess Mazu.",
                    "Visitor: It's incredible! Are those firecrackers part of the celebration?",
                    "Local: Yes, they're used to ward off evil spirits and add to the festive atmosphere.",
                    "Visitor: Fascinating! I've never seen anything like this.",
                    "Local: It's a very important cultural event here."
                ],
                chineseTranslation: "åƒè§€è€…ï¼šå“‡ï¼Œé€™å€‹å»Ÿæœƒå¥½ç†±é¬§ï¼éŠè¡Œåœ¨åšä»€éº¼ï¼Ÿ\nç•¶åœ°äººï¼šé‚£æ˜¯å‚³çµ±çš„åª½ç¥–é¶å¢ƒã€‚äººå€‘æ­£åœ¨æ…¶ç¥åª½ç¥–å¥³ç¥ã€‚\nåƒè§€è€…ï¼šå¤ªä¸å¯æ€è­°äº†ï¼é‚£äº›é­ç‚®æ˜¯æ…¶ç¥æ´»å‹•çš„ä¸€éƒ¨åˆ†å—ï¼Ÿ\nç•¶åœ°äººï¼šæ˜¯çš„ï¼Œå®ƒå€‘ç”¨ä¾†é©…é‚ªä¸¦å¢æ·»ç¯€æ…¶æ°£æ°›ã€‚\nåƒè§€è€…ï¼šçœŸå¼•äººå…¥å‹ï¼æˆ‘å¾æ²’è¦‹éé€™æ¨£çš„æ™¯è±¡ã€‚\nç•¶åœ°äººï¼šé€™æ˜¯é€™è£¡éå¸¸é‡è¦çš„æ–‡åŒ–æ´»å‹•ã€‚",
                question: "éŠè¡Œæ˜¯ç‚ºäº†æ…¶ç¥å“ªä½ç¥ç¥‡ï¼Ÿ",
                options: ["é—œå…¬", "ç‰çš‡å¤§å¸", "åª½ç¥–", "åœŸåœ°å…¬"],
                correctAnswerIndex: 2,
                englishTranscript: "Visitor: Wow, this temple fair is so lively! What's happening with the parade?\nLocal: That's a traditional Mazu procession. People are celebrating the goddess Mazu.\nVisitor: It's incredible! Are those firecrackers part of the celebration?\nLocal: Yes, they're used to ward off evil spirits and add to the festive atmosphere.\nVisitor: Fascinating! I've never seen anything like this.",
            },
            {
                topic: "Asking for a receipt (ç´¢å–æ”¶æ“š)",
                conversation: [
                    "Customer: Can I get a receipt, please?",
                    "Clerk: Certainly. Do you need a uniform invoice (ç™¼ç¥¨)?",
                    "Customer: Yes, please. For tax purposes.",
                    "Clerk: No problem. Here's your invoice. Good luck with the lottery!",
                    "Customer: Oh, right! Thank you!",
                    "Clerk: You're welcome."
                ],
                chineseTranslation: "é¡§å®¢ï¼šå¯ä»¥çµ¦æˆ‘ä¸€å¼µæ”¶æ“šå—ï¼Ÿ\nåº—å“¡ï¼šç•¶ç„¶ã€‚ä½ éœ€è¦çµ±ä¸€ç™¼ç¥¨å—ï¼Ÿ\né¡§å®¢ï¼šæ˜¯çš„ï¼Œè¬è¬ã€‚ç‚ºäº†å ±ç¨…ã€‚\nåº—å“¡ï¼šæ²’å•é¡Œã€‚é€™æ˜¯ä½ çš„ç™¼ç¥¨ã€‚ç¥ä½ ä¸­çï¼\né¡§å®¢ï¼šå–”ï¼Œå°ï¼è¬è¬ï¼\nåº—å“¡ï¼šä¸å®¢æ°£ã€‚",
                question: "é¡§å®¢é™¤äº†æ”¶æ“šä¹‹å¤–é‚„è¦æ±‚äº†ä»€éº¼ï¼Ÿ",
                options: ["å¡‘è† è¢‹", "æ‰¾é›¶", "çµ±ä¸€ç™¼ç¥¨", "æœƒå“¡å¡"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Can I get a receipt, please?\nClerk: Certainly. Do you need a uniform invoice (ç™¼ç¥¨)?\nCustomer: Yes, please. For tax purposes.\nClerk: No problem. Here's your invoice. Good luck with the lottery!\nCustomer: Oh, right! Thank you!",
            },
            {
                topic: "At a Bubble Tea Shop (æ‰‹æ–é£²åº—)",
                conversation: [
                    "Customer: Hi, I'd like a medium-sized passion fruit green tea.",
                    "Staff: Half sugar, regular ice?",
                    "Customer: No, actually, 30% sugar and less ice, please.",
                    "Staff: 30% sugar, less ice. Got it. Anything else?",
                    "Customer: That's all. Thank you!",
                    "Staff: That'll be 60 NTD."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä½ å¥½ï¼Œæˆ‘æƒ³è¦ä¸€æ¯ä¸­æ¯ç™¾é¦™æœç¶ èŒ¶ã€‚\nåº—å“¡ï¼šåŠç³–ï¼Œæ­£å¸¸å†°å—ï¼Ÿ\né¡§å®¢ï¼šä¸ï¼Œå…¶å¯¦æ˜¯ä¸‰åˆ†ç³–ï¼Œå°‘å†°ï¼Œè¬è¬ã€‚\nåº—å“¡ï¼šä¸‰åˆ†ç³–ï¼Œå°‘å†°ã€‚å¥½çš„ã€‚é‚„æœ‰åˆ¥çš„å—ï¼Ÿ\né¡§å®¢ï¼šå°±é€™äº›äº†ã€‚è¬è¬ï¼\nåº—å“¡ï¼šç¸½å…±60å…ƒã€‚",
                question: "é¡§å®¢å°é£²æ–™çš„ç”œåº¦å’Œå†°å¡Šé‡æœ‰ä»€éº¼ç‰¹åˆ¥è¦æ±‚ï¼Ÿ",
                options: ["å…¨ç³–å¤šå†°", "åŠç³–å°‘å†°", "ä¸‰åˆ†ç³–å°‘å†°", "ç„¡ç³–æ­£å¸¸å†°"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Hi, I'd like a medium-sized passion fruit green tea.\nStaff: Half sugar, regular ice?\nCustomer: No, actually, 30% sugar and less ice, please.",
            },
            {
                topic: "Asking for help with directions at a train station (ç«è»Šç«™å•è·¯)",
                conversation: [
                    "Traveler: Excuse me, where is the platform for trains heading south?",
                    "Staff: Southbound trains usually depart from platforms 1 and 2. You can check the electronic board for your specific train.",
                    "Traveler: Platforms 1 and 2. Thank you. Is there an elevator to the platforms?",
                    "Staff: Yes, there's one near the ticket gates.",
                    "Traveler: Great! Thanks for your help.",
                    "Staff: Have a safe journey."
                ],
                chineseTranslation: "æ—…å®¢ï¼šä¸å¥½æ„æ€ï¼Œå¾€å—çš„åˆ—è»Šæœˆå°åœ¨å“ªè£¡ï¼Ÿ\nç«™å‹™äººå“¡ï¼šå¾€å—çš„åˆ—è»Šé€šå¸¸å¾1è™Ÿå’Œ2è™Ÿæœˆå°ç™¼è»Šã€‚æ‚¨å¯ä»¥æŸ¥çœ‹é›»å­çœ‹æ¿ç¢ºèªæ‚¨çš„å…·é«”åˆ—è»Šã€‚\næ—…å®¢ï¼š1è™Ÿå’Œ2è™Ÿæœˆå°ã€‚è¬è¬ã€‚æœ‰é›»æ¢¯åˆ°æœˆå°å—ï¼Ÿ\nç«™å‹™äººå“¡ï¼šæœ‰ï¼Œåœ¨é©—ç¥¨é–˜é–€é™„è¿‘ã€‚\næ—…å®¢ï¼šå¤ªå¥½äº†ï¼è¬è¬ä½ çš„å¹«åŠ©ã€‚\nç«™å‹™äººå“¡ï¼šç¥æ‚¨æ—…é€”å¹³å®‰ã€‚",
                question: "å¾€å—çš„åˆ—è»Šé€šå¸¸å¾å“ªå€‹æœˆå°ç™¼è»Šï¼Ÿ",
                options: ["3è™Ÿå’Œ4è™Ÿæœˆå°", "1è™Ÿå’Œ2è™Ÿæœˆå°", "5è™Ÿå’Œ6è™Ÿæœˆå°", "åªæœ‰1è™Ÿæœˆå°"],
                correctAnswerIndex: 1,
                englishTranscript: "Traveler: Excuse me, where is the platform for trains heading south?\nStaff: Southbound trains usually depart from platforms 1 and 2. You can check the electronic board for your specific train.\nTraveler: Platforms 1 and 2. Thank you. Is there an elevator to the platforms?\nStaff: Yes, there's one near the ticket gates.\nTraveler: Great! Thanks for your help.",
            },
            {
                topic: "At a Traditional Breakfast Shop (å‚³çµ±æ—©é¤åº—)",
                conversation: [
                    "Customer: I'd like one danbing (egg pancake roll) with cheese, and a hot soy milk.",
                    "Clerk: Cheese danbing and hot soy milk, got it. Anything else?",
                    "Customer: Yes, and one fan-tuan (rice ball) with pork floss.",
                    "Clerk: Pork floss fan-tuan. That'll be 110 NTD. For here or to go?",
                    "Customer: To go, please.",
                    "Clerk: Coming right up!"
                ],
                chineseTranslation: "é¡§å®¢ï¼šæˆ‘æƒ³è¦ä¸€ä»½èµ·å¸è›‹é¤…å’Œä¸€æ¯ç†±è±†æ¼¿ã€‚\nåº—å“¡ï¼šèµ·å¸è›‹é¤…å’Œç†±è±†æ¼¿ï¼Œå¥½çš„ã€‚é‚„æœ‰åˆ¥çš„å—ï¼Ÿ\né¡§å®¢ï¼šæ˜¯çš„ï¼Œå†åŠ ä¸€å€‹è‚‰é¬†é£¯ç³°ã€‚\nåº—å“¡ï¼šè‚‰é¬†é£¯ç³°ã€‚ç¸½å…±110å…ƒã€‚å…§ç”¨é‚„æ˜¯å¤–å¸¶ï¼Ÿ\né¡§å®¢ï¼šå¤–å¸¶ï¼Œè¬è¬ã€‚\nåº—å“¡ï¼šé¦¬ä¸Šå°±å¥½ï¼",
                question: "é¡§å®¢é»äº†å“ªå…©ç¨®é£Ÿç‰©ï¼Ÿ",
                options: ["ä¸‰æ˜æ²»å’Œç´…èŒ¶", "æ¼¢å ¡å’Œå¥¶èŒ¶", "è›‹é¤…å’Œé£¯ç³°", "ç‡’é¤…æ²¹æ¢å’Œç±³æ¼¿"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: I'd like one danbing (egg pancake roll) with cheese, and a hot soy milk.\nClerk: Cheese danbing and hot soy milk, got it. Anything else?\nCustomer: Yes, and one fan-tuan (rice ball) with pork floss.\nClerk: Pork floss fan-tuan. That'll be 110 NTD. For here or to go?",
            },
            {
                topic: "Asking for a power outlet (è©¢å•æ’åº§)",
                conversation: [
                    "Customer: Excuse me, do you have any available power outlets here?",
                    "Staff: Yes, there are a few near the window seats, and some under the bar counter.",
                    "Customer: Great, my phone battery is almost dead. Can I use one?",
                    "Staff: Of course. Feel free to use any that are free.",
                    "Customer: Thank you so much!",
                    "Staff: No problem."
                ],
                chineseTranslation: "é¡§å®¢ï¼šä¸å¥½æ„æ€ï¼Œé€™è£¡æœ‰å¯ç”¨çš„æ’åº§å—ï¼Ÿ\nåº—å“¡ï¼šæœ‰ï¼Œçª—é‚Šåº§ä½é™„è¿‘æœ‰å¹¾å€‹ï¼Œå§å°ä¸‹æ–¹ä¹Ÿæœ‰ä¸€äº›ã€‚\né¡§å®¢ï¼šå¤ªå¥½äº†ï¼Œæˆ‘æ‰‹æ©Ÿå¿«æ²’é›»äº†ã€‚æˆ‘å¯ä»¥ç”¨ä¸€å€‹å—ï¼Ÿ\nåº—å“¡ï¼šç•¶ç„¶ã€‚éš¨æ„ä½¿ç”¨ä»»ä½•ç©ºé–’çš„æ’åº§ã€‚\né¡§å®¢ï¼šéå¸¸æ„Ÿè¬ï¼\nåº—å“¡ï¼šä¸å®¢æ°£ã€‚",
                question: "é¡§å®¢ç‚ºä»€éº¼éœ€è¦æ’åº§ï¼Ÿ",
                options: ["æƒ³å……é›»", "æƒ³ä½¿ç”¨å¹é¢¨æ©Ÿ", "æƒ³é€£æ¥ç­†è¨˜å‹é›»è…¦", "æƒ³ä½¿ç”¨é›»ç£çˆ"],
                correctAnswerIndex: 0,
                englishTranscript: "Customer: Excuse me, do you have any available power outlets here?\nStaff: Yes, there are a few near the window seats, and some under the bar counter.\nCustomer: Great, my phone battery is almost dead. Can I use one?\nStaff: Of course. Feel free to use any that are free.\nCustomer: Thank you so much!",
            },
            {
                topic: "At a Traditional Wet Market (å‚³çµ±èœå¸‚å ´)",
                conversation: [
                    "Customer: Good morning! How fresh are these fish?",
                    "Vendor: Good morning! They were just caught last night. Very fresh!",
                    "Customer: I'll take two of the smaller ones, please. Can you clean them for me?",
                    "Vendor: Yes, no problem. Do you want them scaled and gutted?",
                    "Customer: Yes, please. Thank you!",
                    "Vendor: Coming right up."
                ],
                chineseTranslation: "é¡§å®¢ï¼šæ—©å®‰ï¼é€™äº›é­šæ–°é®®å—ï¼Ÿ\næ”¤è²©ï¼šæ—©å®‰ï¼å®ƒå€‘æ˜¯æ˜¨æ™šå‰›æ•çš„ã€‚éå¸¸æ–°é®®ï¼\né¡§å®¢ï¼šæˆ‘è²·å…©æ¢å°ä¸€é»çš„ï¼Œè¬è¬ã€‚å¯ä»¥å¹«æˆ‘è™•ç†ä¸€ä¸‹å—ï¼Ÿ\næ”¤è²©ï¼šå¯ä»¥ï¼Œæ²’å•é¡Œã€‚ä½ è¦å»é±—å’Œå»å…§è‡Ÿå—ï¼Ÿ\né¡§å®¢ï¼šæ˜¯çš„ï¼Œè¬è¬ã€‚\næ”¤è²©ï¼šé¦¬ä¸Šå°±å¥½ã€‚",
                question: "é¡§å®¢æƒ³è²·ä»€éº¼ï¼Ÿ",
                options: ["è”¬èœ", "è‚‰é¡", "é­š", "æ°´æœ"],
                correctAnswerIndex: 2,
                englishTranscript: "Customer: Good morning! How fresh are these fish?\nVendor: Good morning! They were just caught last night. Very fresh!\nCustomer: I'll take two of the smaller ones, please. Can you clean them for me?\nVendor: Yes, no problem. Do you want them scaled and gutted?\nCustomer: Yes, please. Thank you!",
            }
        ];
        let currentScenarioIndex = 0;
        let selectedOptionIndex = -1; // To track the user's selected option for the quiz

        // Speaker voice configuration
        const speakerColors = ['text-blue-700', 'text-green-700', 'text-purple-700', 'text-red-700', 'text-indigo-700'];
        let speakerMap = {}; // Maps speaker name (e.g., "Tourist") to an index for color/voice
        let speakerVoiceMap = {}; // Maps speaker name to a SpeechSynthesisVoice object

        // --- Utility Functions ---

        /**
         * Displays a message in the global message box.
         * @param {string} message - The message to display.
         * @param {string} type - 'success', 'error', 'info', 'warning'. Determines styling.
         */
        function showMessageBox(message, type = 'info') {
            messageBox.textContent = message;
            messageBox.className = 'message-box show'; // Reset classes first
            if (type === 'success') {
                messageBox.classList.add('bg-green-100', 'border-green-400', 'text-green-700');
            } else if (type === 'error') {
                messageBox.classList.add('bg-red-100', 'border-red-400', 'text-red-700');
            } else if (type === 'warning') {
                messageBox.classList.add('bg-yellow-100', 'border-yellow-400', 'text-yellow-700');
            } else { // info
                messageBox.classList.add('bg-blue-100', 'border-blue-400', 'text-blue-700');
            }
            setTimeout(() => {
                messageBox.classList.remove('show');
            }, 5000); // Hide after 5 seconds
        }

        /**
         * Normalizes text for comparison (removes punctuation, converts to lowercase).
         * @param {string} text - The input text.
         * @returns {string} Normalized text.
         */
        function normalizeText(text) {
            return text.toLowerCase().replace(/[.,/#!$%^&*;:{}=\-_`~()?'"]/g, '').replace(/\s{2,}/g, ' ').trim();
        }

        // --- Tab Switching Logic ---
        function showTab(tabId) {
            // Deactivate all tab buttons and hide all content sections
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));

            // Activate the selected tab button and show its content
            if (tabId === 'listening') {
                listeningTabBtn.classList.add('active');
                listeningContent.classList.add('active');
            }
            // Speaking tab logic removed
        }

        listeningTabBtn.addEventListener('click', () => showTab('listening'));

        // --- Listening Practice Functions ---

        const playConversationBtn = document.getElementById('playConversationBtn');
        const pauseConversationBtn = document.getElementById('pauseConversationBtn');
        const stopConversationBtn = document.getElementById('stopConversationBtn'); // New stop button
        const nextScenarioBtn = document.getElementById('nextScenarioBtn');
        const conversationDisplay = document.getElementById('conversationDisplay');
        const scenarioQuestionEl = document.getElementById('scenarioQuestion');
        const optionsContainer = document.getElementById('optionsContainer');
        const checkAnswerBtn = document.getElementById('checkAnswerBtn');
        const showTranscriptBtn = document.getElementById('showTranscriptBtn');
        const quizFeedback = document.getElementById('quizFeedback');
        const quizTranscriptDisplay = document.getElementById('quizTranscriptDisplay');
        const usAccentBtn = document.getElementById('usAccentBtn');
        const ukAccentBtn = document.getElementById('ukAccentBtn');
        const scenarioNumberDisplay = document.getElementById('scenarioNumberDisplay'); // New element for scenario number

        /**
         * Selects the best available voice for a given language tag and preference.
         * Prioritizes Google voices, then Microsoft, then generic.
         * @param {string} langTag - The language tag (e.g., 'en-US', 'en-GB').
         * @returns {SpeechSynthesisVoice|null} The selected voice or null if none found.
         */
        function selectBestVoice(langTag) {
            const voices = synth.getVoices();
            const filteredVoices = voices.filter(voice => voice.lang === langTag);

            // Prioritize Google voices
            let voice = filteredVoices.find(v => v.name.includes('Google') && !v.name.includes('Female'));
            if (voice) return voice;
            voice = filteredVoices.find(v => v.name.includes('Google')); // Any Google voice

            // Then Microsoft voices
            if (!voice) voice = filteredVoices.find(v => v.name.includes('Microsoft') && !v.name.includes('Female'));
            if (!voice) voice = filteredVoices.find(v => v.name.includes('Microsoft')); // Any Microsoft voice

            // Fallback to any voice for the language
            if (!voice) voice = filteredVoices[0];

            return voice || null;
        }

        /**
         * Loads available voices and assigns them to speakerVoiceMap.
         */
        function loadVoices() {
            // If voices haven't loaded yet, retry after a short delay
            if (synth.getVoices().length === 0) {
                setTimeout(loadVoices, 100);
                return;
            }

            let voice1 = selectBestVoice(currentAccent);
            let voice2 = selectBestVoice(currentAccent);

            // Ensure voice2 is different from voice1 if possible
            const allVoicesForAccent = synth.getVoices().filter(v => v.lang === currentAccent);
            if (voice1 && voice2 && voice1.name === voice2.name && allVoicesForAccent.length > 1) {
                voice2 = allVoicesForAccent.find(v => v.name !== voice1.name) || voice1;
            } else if (!voice1 && allVoicesForAccent.length > 0) { // Fallback if selectBestVoice failed
                voice1 = allVoicesForAccent[0];
                voice2 = allVoicesForAccent.length > 1 ? allVoicesForAccent[1] : allVoicesForAccent[0];
            } else if (!voice1 && !voice2) { // Absolute fallback to any English voices
                const englishVoices = synth.getVoices().filter(v => v.lang.startsWith('en-'));
                if (englishVoices.length >= 2) {
                    voice1 = englishVoices[0];
                    voice2 = englishVoices[1];
                } else if (englishVoices.length === 1) {
                    voice1 = englishVoices[0];
                    voice2 = englishVoices[0];
                } else {
                    console.warn('No English voices found. Speech synthesis may not work.');
                }
            }

            speaker1Voice = voice1;
            speaker2Voice = voice2;

            // console.log("Final Speaker 1 Voice:", speaker1Voice ? speaker1Voice.name : 'N/A');
            // console.log("Final Speaker 2 Voice:", speaker2Voice ? speaker2Voice.name : 'N/A');
        }

        // Ensure voices are loaded when they change or initially
        if (synth.onvoiceschanged !== undefined) {
            synth.onvoiceschanged = loadVoices;
        }
        loadVoices(); // Call initially in case voices are already loaded

        /**
         * Speaks the given text using SpeechSynthesisUtterance and returns a Promise.
         * @param {string} text - The text to speak.
         * @param {SpeechSynthesisVoice} voice - The voice to use.
         * @returns {Promise<void>} A promise that resolves when speech ends or rejects on error.
         */
        function speakText(text, voice) {
            return new Promise((resolve, reject) => {
                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = currentAccent; // Use selected accent for language
                currentUtterance.voice = voice;
                currentUtterance.onend = () => {
                    resolve();
                };
                currentUtterance.onerror = (event) => {
                    // If the error is 'interrupted' and conversation was explicitly stopped, resolve without error.
                    if (event.error === 'interrupted' && !isConversationPlaying) {
                        resolve();
                    } else {
                        console.error('SpeechSynthesisUtterance.onerror', event.error || event); // Log event.error if available
                        showMessageBox('èªéŸ³åˆæˆå¤±æ•—ã€‚æ‚¨çš„ç€è¦½å™¨å¯èƒ½ä¸æ”¯æ´æˆ–æœ‰å•é¡Œã€‚', 'error');
                        reject(event); // Reject the promise on other errors
                    }
                };
                try {
                    synth.speak(currentUtterance);
                } catch (e) {
                    console.error('Error calling synth.speak:', e);
                    showMessageBox('èªéŸ³åˆæˆå•Ÿå‹•å¤±æ•—ã€‚', 'error');
                    reject(e); // Reject if speak itself throws an error
                }
            });
        }

        /**
         * Displays the current scenario's conversation, question, and options.
         */
        function displayCurrentScenario() {
            const scenario = listeningScenarios[currentScenarioIndex];
            conversationDisplay.innerHTML = '<p class="text-gray-500 italic">é»æ“Šã€Œæ’­æ”¾å°è©±ã€é–‹å§‹ã€‚</p>'; // Clear and reset
            scenarioQuestionEl.textContent = `å•é¡Œï¼š${scenario.question}`;
            scenarioQuestionEl.classList.add('hidden'); // Hide until conversation is played

            optionsContainer.innerHTML = ''; // Clear previous options
            scenario.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button btn-secondary';
                button.textContent = option;
                button.dataset.index = index;
                button.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(button);
            });

            checkAnswerBtn.disabled = true;
            showTranscriptBtn.disabled = true;
            quizFeedback.textContent = '';
            quizTranscriptDisplay.classList.add('hidden');
            selectedOptionIndex = -1; // Reset selected option

            // Update scenario number display
            scenarioNumberDisplay.textContent = `(æƒ…å¢ƒ #${currentScenarioIndex + 1} / ${listeningScenarios.length})`;

            // Reset speaker map for new scenario
            speakerMap = {};
        }

        /**
         * Plays the conversation line by line.
         */
        async function playConversation() {
            const scenario = listeningScenarios[currentScenarioIndex];
            const conversationLines = scenario.conversation;
            conversationDisplay.innerHTML = ''; // Clear initial message
            synth.cancel(); // Always cancel previous speech before starting new
            
            playConversationBtn.disabled = true; // Disable play button during playback
            nextScenarioBtn.disabled = true; // Disable next scenario during playback
            pauseConversationBtn.disabled = false; // Enable pause button
            stopConversationBtn.disabled = false; // Enable stop button
            pauseConversationBtn.textContent = 'æš«åœ â¸ï¸';
            isConversationPlaying = true;
            isConversationPaused = false;

            let speakerCounter = 0;
            for (let i = 0; i < conversationLines.length; i++) {
                // If stopped by user, break the loop
                if (!isConversationPlaying) {
                    break;
                }

                // Handle pause state: wait until resumed
                while (isConversationPaused && isConversationPlaying) {
                    await new Promise(resolve => setTimeout(resolve, 100)); // Poll every 100ms
                }

                // Check again if stopped after pause
                if (!isConversationPlaying) {
                    break;
                }

                const line = conversationLines[i];
                const speakerMatch = line.match(/^([^:]+):/);
                let speakerName = 'Unknown';
                let actualSpeech = line;

                if (speakerMatch) {
                    speakerName = speakerMatch[1].trim();
                    actualSpeech = line.substring(speakerMatch[0].length).trim();
                }

                if (!(speakerName in speakerMap)) {
                    speakerMap[speakerName] = speakerCounter % 2; // Assign to speaker 0 or 1
                    speakerCounter++;
                }

                const speakerIdx = speakerMap[speakerName];
                const speakerColorClass = speakerColors[speakerIdx % speakerColors.length]; // Use modular arithmetic for color
                const voiceToUse = (speakerIdx === 0) ? speaker1Voice : speaker2Voice;

                const p = document.createElement('p');
                p.className = `conversation-line text-gray-800 ${speakerColorClass}`;
                p.textContent = line;
                conversationDisplay.appendChild(p);
                conversationDisplay.scrollTop = conversationDisplay.scrollHeight; // Scroll to bottom

                try {
                    await speakText(actualSpeech, voiceToUse);
                } catch (error) {
                    console.error("Error speaking line:", error);
                    // Continue to next line even if one fails
                }

                // Add a small delay between lines for better pacing, unless paused or stopped
                if (isConversationPlaying && !isConversationPaused) {
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
            }

            // After conversation (or if stopped), reset controls
            playConversationBtn.disabled = false; // Re-enable play button
            nextScenarioBtn.disabled = false; // Re-enable next scenario button
            pauseConversationBtn.disabled = true; // Disable pause after conversation finishes
            stopConversationBtn.disabled = true; // Disable stop after conversation finishes
            pauseConversationBtn.textContent = 'æš«åœ â¸ï¸';
            isConversationPlaying = false;
            isConversationPaused = false;

            synth.cancel(); // Ensure all speech is stopped at the end

            showMessageBox('å°è©±æ’­æ”¾å®Œç•¢ã€‚è«‹é¸æ“‡ç­”æ¡ˆã€‚', 'info');
            scenarioQuestionEl.classList.remove('hidden');
            optionsContainer.querySelectorAll('.option-button').forEach(btn => btn.disabled = false);
        }

        /**
         * Handles option selection for the quiz.
         * @param {number} index - The index of the selected option.
         */
        function selectOption(index) {
            selectedOptionIndex = index;
            optionsContainer.querySelectorAll('.option-button').forEach((btn, idx) => {
                btn.classList.remove('selected');
                if (idx === index) {
                    btn.classList.add('selected');
                }
            });
            checkAnswerBtn.disabled = false; // Enable check answer button
        }

        playConversationBtn.addEventListener('click', playConversation);

        pauseConversationBtn.addEventListener('click', () => {
            if (synth.speaking && !isConversationPaused) {
                synth.pause();
                isConversationPaused = true;
                pauseConversationBtn.textContent = 'ç¹¼çºŒæ’­æ”¾ â–¶ï¸';
                showMessageBox('å°è©±å·²æš«åœã€‚', 'info');
            } else if (synth.paused && isConversationPaused) {
                synth.resume();
                isConversationPaused = false;
                pauseConversationBtn.textContent = 'æš«åœ â¸ï¸';
                showMessageBox('å°è©±å·²æ¢å¾©ã€‚', 'info');
            }
        });

        stopConversationBtn.addEventListener('click', () => {
            if (synth.speaking || synth.paused) {
                synth.cancel(); // Stop any ongoing speech
            }
            isConversationPlaying = false;
            isConversationPaused = false;
            playConversationBtn.disabled = false;
            nextScenarioBtn.disabled = false;
            pauseConversationBtn.disabled = true;
            stopConversationBtn.disabled = true;
            pauseConversationBtn.textContent = 'æš«åœ â¸ï¸';
            showMessageBox('å°è©±å·²åœæ­¢ã€‚', 'info');
            // Re-display scenario to clear conversation text and reset state
            displayCurrentScenario();
        });


        nextScenarioBtn.addEventListener('click', () => {
            if (synth.speaking || synth.paused) {
                synth.cancel(); // Stop any ongoing speech
                isConversationPlaying = false;
                isConversationPaused = false;
                pauseConversationBtn.disabled = true;
                stopConversationBtn.disabled = true;
                pauseConversationBtn.textContent = 'æš«åœ â¸ï¸';
            }
            
            // Randomly choose a new scenario, ensuring it's not the current one
            let newScenarioIndex;
            do {
                newScenarioIndex = Math.floor(Math.random() * listeningScenarios.length);
            } while (newScenarioIndex === currentScenarioIndex);
            
            currentScenarioIndex = newScenarioIndex;
            displayCurrentScenario();
            showMessageBox(`è¼‰å…¥ä¸‹ä¸€å€‹æƒ…å¢ƒï¼šæƒ…å¢ƒ #${currentScenarioIndex + 1}ã€‚`, 'info');
        });

        checkAnswerBtn.addEventListener('click', () => {
            if (selectedOptionIndex === -1) {
                showMessageBox('è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆã€‚', 'warning');
                return;
            }

            const scenario = listeningScenarios[currentScenarioIndex];
            if (selectedOptionIndex === scenario.correctAnswerIndex) {
                quizFeedback.textContent = 'ç­”å°äº†ï¼å¤ªæ£’äº†ï¼ğŸ‰';
                quizFeedback.className = 'text-lg font-semibold mt-4 text-green-600';
                showMessageBox('æ­å–œï¼ç­”æ¡ˆæ­£ç¢ºï¼', 'success');
            } else {
                const correctAnswerText = scenario.options[scenario.correctAnswerIndex];
                quizFeedback.textContent = `ç­”éŒ¯äº†ã€‚æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼šã€Œ${correctAnswerText}ã€ã€‚è«‹æº–å‚™å¥½å¾Œå‰å¾€ä¸‹ä¸€å€‹æƒ…å¢ƒã€‚ğŸ˜Š`;
                quizFeedback.className = 'text-lg font-semibold mt-4 text-red-600';
                showMessageBox('ç­”æ¡ˆä¸æ­£ç¢ºã€‚', 'error');
            }
            checkAnswerBtn.disabled = true; // Disable check answer after one attempt
            showTranscriptBtn.disabled = false; // Enable show transcript
            optionsContainer.querySelectorAll('.option-button').forEach(btn => btn.disabled = true); // Disable options after checking
        });

        showTranscriptBtn.addEventListener('click', () => {
            const scenario = listeningScenarios[currentScenarioIndex];
            quizTranscriptDisplay.textContent = `ä¸­æ–‡åŸæ–‡ï¼š\n${scenario.chineseTranslation}`;
            quizTranscriptDisplay.classList.remove('hidden');
        });

        usAccentBtn.addEventListener('click', () => {
            currentAccent = 'en-US';
            usAccentBtn.classList.add('btn-primary');
            usAccentBtn.classList.remove('btn-secondary');
            ukAccentBtn.classList.add('btn-secondary');
            ukAccentBtn.classList.remove('btn-primary');
            loadVoices(); // Reload voices based on new accent preference
            showMessageBox('å·²åˆ‡æ›åˆ°ç¾å¼å£éŸ³ ğŸ‡ºğŸ‡¸ã€‚', 'info');
        });

        ukAccentBtn.addEventListener('click', () => {
            currentAccent = 'en-GB';
            ukAccentBtn.classList.add('btn-primary');
            ukAccentBtn.classList.remove('btn-secondary');
            usAccentBtn.classList.add('btn-secondary');
            usAccentBtn.classList.remove('btn-primary');
            loadVoices(); // Reload voices based on new accent preference
            showMessageBox('å·²åˆ‡æ›åˆ°è‹±å¼å£éŸ³ ğŸ‡¬ğŸ‡§ã€‚', 'info');
        });

        // --- Initial Load ---
        window.onload = () => {
            // Display the first listening scenario
            displayCurrentScenario();
            showMessageBox('æ­¡è¿ä½¿ç”¨æ‚¨çš„è‹±èªå­¸ç¿’æ‡‰ç”¨ç¨‹å¼ï¼', 'info');
        };

    </script>
</body>
</html>
